<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- SEO & Performance Enhanced Head -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=yes">
    <title>LetMeGlowUp – Beauty, Skincare, Fashion & AI Tools</title>
    <meta name="description" content="Discover your best self with LetMeGlowUp: AI-powered beauty, skincare, and fashion tools, personalized recommendations, and expert tips.">
    <meta name="keywords" content="beauty, skincare, fashion, AI, personalized, recommendations, glow up, products, assessment, quiz, wishlist, settings">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#ff69b4">
    <link rel="canonical" href="https://letmeglowup.com/">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://letmeglowup.com/">
    <meta property="og:title" content="LetMeGlowUp – Beauty, Skincare, Fashion & AI Tools">
    <meta property="og:description" content="Discover your best self with LetMeGlowUp: AI-powered beauty, skincare, and fashion tools, personalized recommendations, and expert tips.">
    <meta property="og:image" content="https://letmeglowup.com/assets/images/og-image.jpg">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LetMeGlowUp – Beauty, Skincare, Fashion & AI Tools">
    <meta name="twitter:description" content="Discover your best self with LetMeGlowUp: AI-powered beauty, skincare, and fashion tools, personalized recommendations, and expert tips.">
    <meta name="twitter:image" content="https://letmeglowup.com/assets/images/og-image.jpg">
    <!-- Structured Data: Beauty Product Example -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org/",
      "@type": "WebSite",
      "name": "LetMeGlowUp",
      "url": "https://letmeglowup.com/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://letmeglowup.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <!-- Google Analytics 4 (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX', { anonymize_ip: true });
    </script>
    <!-- End Google Analytics 4 -->

    <!-- Conversion Tracking (Google Ads Example) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-YYYYYYYYYY"></script>
    <script>
      gtag('config', 'AW-YYYYYYYYYY');
      // Example: Conversion event for newsletter signup
      window.trackConversion = function(label) {
        gtag('event', 'conversion', { 'send_to': 'AW-YYYYYYYYYY/' + label });
      };
    </script>
    <!-- End Conversion Tracking -->

    <!-- Performance Monitoring: Web Vitals -->
    <script async src="https://unpkg.com/web-vitals@3/dist/web-vitals.iife.js"></script>
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        if (window.webVitals) {
          webVitals.getCLS(sendToGA);
          webVitals.getFID(sendToGA);
          webVitals.getLCP(sendToGA);
          webVitals.getFCP(sendToGA);
          webVitals.getTTFB(sendToGA);
        }
        function sendToGA(metric) {
          gtag('event', metric.name, {
            value: metric.value,
            event_category: 'Web Vitals',
            event_label: metric.id,
            non_interaction: true
          });
        }
      });
    </script>
    <!-- End Performance Monitoring -->

    <!-- Error Tracking: Sentry (privacy-friendly) -->
    <script src="https://browser.sentry-cdn.com/7.120.0/bundle.tracing.min.js" crossorigin="anonymous" async></script>
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        if (window.Sentry) {
          Sentry.init({
            dsn: 'https://examplePublicKey@o0.ingest.sentry.io/0',
            tracesSampleRate: 0.1,
            integrations: [new Sentry.BrowserTracing()],
            environment: 'production',
            release: 'letmeglowup@1.0.0',
            beforeSend(event) {
              // Remove PII
              if (event.user) delete event.user;
              return event;
            }
          });
        }
      });
      window.onerror = function(message, source, lineno, colno, error) {
        if (window.Sentry) Sentry.captureException(error || message);
      };
    </script>
    <!-- End Error Tracking -->
    <script type="application/ld+json" id="product-ld"></script>
    <!-- Sitemap -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml" />
    <!-- Favicon -->
    <link rel="icon" href="/assets/images/favicon.ico" type="image/x-icon">
    <!-- Preconnect & Resource Hints for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <!-- Preload critical CSS & fonts -->
    <link rel="preload" href="/assets/css/main.css" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" as="style" onload="this.rel='stylesheet'">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" media="all" />
    <!-- Font display swap for performance -->
    <style> @font-face { font-display: swap; } </style>
    <!-- AOS Animation Library -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" media="all" />
    <!-- Tailwind CSS CDN (defer for non-blocking) -->
    <script src="https://cdn.tailwindcss.com" defer></script>
    <!-- Mobile-first: ensure responsive meta and CSS above -->
    <script>
    // Dynamic meta tag management
    window.setMeta = function({title, description, url, image, canonical}) {
      if (title) document.title = title;
      if (description) {
        let m = document.querySelector('meta[name="description"]');
        if (m) m.setAttribute('content', description);
      }
      if (url) {
        let ogu = document.querySelector('meta[property="og:url"]');
        if (ogu) ogu.setAttribute('content', url);
        let turl = document.querySelector('link[rel="canonical"]');
        if (turl) turl.setAttribute('href', url);
      }
      if (image) {
        let ogimg = document.querySelector('meta[property="og:image"]');
        if (ogimg) ogimg.setAttribute('content', image);
        let twimg = document.querySelector('meta[name="twitter:image"]');
        if (twimg) twimg.setAttribute('content', image);
      }
      if (canonical) {
        let c = document.querySelector('link[rel="canonical"]');
        if (c) c.setAttribute('href', canonical);
      }
    };
    // Structured data for beauty products (example, can be called after rendering products)
    window.setProductLD = function(product) {
      const data = {
        "@context": "https://schema.org/",
        "@type": "Product",
        "name": product.name,
        "image": product.image,
        "description": product.description,
        "brand": {"@type": "Brand", "name": product.brand},
        "offers": {
          "@type": "Offer",
          "priceCurrency": product.currency || "USD",
          "price": product.price,
          "availability": "https://schema.org/InStock"
        }
      };
      document.getElementById('product-ld').textContent = JSON.stringify(data);
    };
    // Lazy load all images by default
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('img').forEach(img => {
        if (!img.hasAttribute('loading')) img.setAttribute('loading','lazy');
        img.setAttribute('decoding','async');
      });
      // --- Monitoring & Feedback Integrations ---
      // Uptime Monitoring (Pingdom/Statuspage.io badge)
      const uptimeBadge = document.createElement('a');
      uptimeBadge.href = 'https://status.letmeglowup.com';
      uptimeBadge.target = '_blank';
      uptimeBadge.rel = 'noopener';
      uptimeBadge.style = 'position:fixed;bottom:10px;left:10px;z-index:9999;';
      uptimeBadge.innerHTML = '<img src="https://statuspage.io/badge/status/your-statuspage-id.svg" alt="Uptime Status" style="height:28px;">';
      document.body.appendChild(uptimeBadge);

      // User Feedback Widget (simple modal)
      const feedbackBtn = document.createElement('button');
      feedbackBtn.textContent = '💬 Feedback';
      feedbackBtn.style = 'position:fixed;bottom:50px;right:10px;z-index:9999;background:#ff69b4;color:#fff;padding:8px 16px;border:none;border-radius:20px;box-shadow:0 2px 8px #ff69b455;cursor:pointer;font-size:15px;';
      document.body.appendChild(feedbackBtn);
      const feedbackModal = document.createElement('div');
      feedbackModal.style = 'display:none;position:fixed;bottom:90px;right:10px;z-index:10000;background:#fffefc;border:1px solid #ff69b4;padding:18px 20px;border-radius:12px;box-shadow:0 2px 16px #ff69b455;width:320px;max-width:90vw;';
      feedbackModal.innerHTML = '<b>Send Feedback</b><br><textarea id="feedback-text" rows="3" style="width:100%;margin:8px 0 8px 0;padding:6px;border-radius:6px;border:1px solid #eee;"></textarea><br><button id="feedback-send" style="background:#ff69b4;color:#fff;padding:6px 18px;border:none;border-radius:8px;">Send</button> <button id="feedback-cancel" style="margin-left:8px;">Cancel</button><div id="feedback-status" style="margin-top:6px;font-size:12px;"></div>';
      document.body.appendChild(feedbackModal);
      feedbackBtn.onclick = () => { feedbackModal.style.display = 'block'; };
      feedbackModal.querySelector('#feedback-cancel').onclick = () => { feedbackModal.style.display = 'none'; };
      feedbackModal.querySelector('#feedback-send').onclick = () => {
        const text = feedbackModal.querySelector('#feedback-text').value.trim();
        const status = feedbackModal.querySelector('#feedback-status');
        if (!text) { status.textContent = 'Please enter feedback.'; return; }
        status.textContent = 'Sending...';
        fetch('https://api.example.com/feedback', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ feedback: text, url: location.href })
        }).then(r => {
          if (r.ok) { status.textContent = 'Thank you for your feedback!'; feedbackModal.querySelector('#feedback-text').value = ''; setTimeout(()=>{feedbackModal.style.display='none';status.textContent='';}, 1200); }
          else status.textContent = 'Error sending feedback.';
        }).catch(()=>{ status.textContent = 'Error sending feedback.'; });
      };

      // A/B Testing Framework (simple variant assignment)
      window.ABTest = function(testName, variants) {
        let key = 'ab_' + testName;
        let val = localStorage.getItem(key);
        if (!val) {
          val = variants[Math.floor(Math.random()*variants.length)];
          localStorage.setItem(key, val);
        }
        return val;
      };
      // Example usage: let heroVariant = ABTest('hero', ['A','B']);

      // Content Update Workflow (manual trigger for editors)
      window.triggerContentUpdate = function() {
        alert('Content update workflow triggered. (Integrate with CMS or Netlify build hook)');
        // Example: fetch('https://api.netlify.com/build_hooks/your-hook-id', {method:'POST'});
      };

      // Backup Strategy (manual/automated note)
      window.showBackupInfo = function() {
        alert('Backups are managed via Netlify deploy history and external storage. For full backup, download site files and export data from any connected services.');
      };
      // --- End Monitoring & Feedback ---
      // --- In-Browser Testing Utilities (DEV ONLY) ---
      window.LetMeGlowTest = {
        browserCompatibility() {
          const features = [
            'fetch' in window,
            'Promise' in window,
            'IntersectionObserver' in window,
            'localStorage' in window,
            'classList' in document.documentElement,
            'addEventListener' in window,
            'querySelector' in document
          ];
          return features.every(Boolean) ? 'All essential features supported.' : 'Some features missing!';
        },
        mobileResponsiveness() {
          return window.innerWidth <= 480 ? 'Mobile viewport detected.' : 'Desktop/tablet viewport.';
        },
        testForms() {
          const forms = document.querySelectorAll('form');
          let results = [];
          forms.forEach(form => {
            const valid = form.checkValidity();
            results.push({id: form.id, valid, action: form.action});
          });
          return results;
        },
        catchJSErrors() {
          window.onerror = function(msg, src, line, col, err) {
            console.error('JS Error:', msg, src, line, col, err);
            return false;
          };
          window.addEventListener('unhandledrejection', function(e) {
            console.error('Unhandled Promise rejection:', e.reason);
          });
          return 'JS error catching enabled (see console).';
        },
        benchmarkPerformance() {
          if (!window.performance || !performance.timing) return 'Performance API not supported.';
          const t = performance.timing;
          return {
            domContentLoaded: t.domContentLoadedEventEnd - t.navigationStart,
            pageLoad: t.loadEventEnd - t.navigationStart,
            firstPaint: (window.performance.getEntriesByType && performance.getEntriesByType('paint')[0]?.startTime) || 'N/A'
          };
        },
        checkAccessibility() {
          const results = [];
          document.querySelectorAll('img:not([alt])').forEach(img => results.push('Missing alt: ' + img.src));
          document.querySelectorAll('button, a').forEach(el => {
            if (!el.hasAttribute('aria-label') && !el.textContent.trim()) results.push('Missing label: ' + el.outerHTML);
          });
          return results.length ? results : 'Basic accessibility checks passed.';
        },
        validateSEO() {
          const metaDesc = document.querySelector('meta[name="description"]');
          const title = document.title;
          const canonical = document.querySelector('link[rel="canonical"]');
          const og = document.querySelector('meta[property="og:title"]');
          const twitter = document.querySelector('meta[name="twitter:title"]');
          let issues = [];
          if (!metaDesc) issues.push('Missing meta description');
          if (!title) issues.push('Missing <title>');
          if (!canonical) issues.push('Missing canonical link');
          if (!og) issues.push('Missing Open Graph title');
          if (!twitter) issues.push('Missing Twitter title');
          return issues.length ? issues : 'SEO meta tags present.';
        }
      };
      // Add a simple dev panel (only in localhost)
      if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
        const panel = document.createElement('div');
        panel.style = 'position:fixed;bottom:10px;right:10px;z-index:9999;background:#fffefc;border:1px solid #ff69b4;padding:10px 16px;border-radius:8px;box-shadow:0 2px 8px #ff69b455;font-size:13px;color:#1a1a1a;';
        panel.innerHTML = '<b>LetMeGlowTest</b><br>' +
          '<button onclick="alert(LetMeGlowTest.browserCompatibility())">Browser</button> ' +
          '<button onclick="alert(LetMeGlowTest.mobileResponsiveness())">Mobile</button> ' +
          '<button onclick="console.log(LetMeGlowTest.testForms());alert(\'Form results in console\')">Forms</button> ' +
          '<button onclick="alert(LetMeGlowTest.catchJSErrors())">JS Errors</button> ' +
          '<button onclick="console.log(LetMeGlowTest.benchmarkPerformance());alert(\'Perf in console\')">Perf</button> ' +
          '<button onclick="console.log(LetMeGlowTest.checkAccessibility());alert(\'A11y in console\')">A11y</button> ' +
          '<button onclick="alert(LetMeGlowTest.validateSEO())">SEO</button>';
        document.body.appendChild(panel);
      }
      // --- End Testing Utilities ---
      // User Interaction Analytics: Track clicks on nav, wishlist, settings, etc.
      document.body.addEventListener('click', function(e) {
        let el = e.target;
        while (el && el !== document.body) {
          if (el.matches('[data-analytics]')) {
            gtag('event', 'interaction', {
              event_category: el.getAttribute('data-analytics-category') || 'UI',
              event_label: el.getAttribute('data-analytics-label') || el.textContent.trim(),
              event_action: el.getAttribute('data-analytics-action') || 'click'
            });
            break;
          }
          el = el.parentElement;
        }
      });
      // E-commerce Affiliate Link Tracking
      document.querySelectorAll('a[href*="aff="]').forEach(link => {
        link.addEventListener('click', function() {
          gtag('event', 'affiliate_click', {
            event_category: 'Ecommerce',
            event_label: link.href
          });
        });
      });
      // Custom Event Tracking for AI Tool Usage
      document.querySelectorAll('[data-ai-tool]').forEach(btn => {
        btn.addEventListener('click', function() {
          gtag('event', 'ai_tool_used', {
            event_category: 'AI Tools',
            event_label: btn.getAttribute('data-ai-tool')
          });
        });
      });
    });
    </script>
  </head>
  <body class="bg-[#fffefc] text-[#1a1a1a] font-sans">
<!-- Sitemap.xml generator (for static export, not for client) -->
<!--
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://letmeglowup.com/</loc>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>https://letmeglowup.com/affiliate-products.html</loc>
    <priority>0.8</priority>
  </url>
  <url>
    <loc>https://letmeglowup.com/#wishlist</loc>
    <priority>0.6</priority>
  </url>
  <url>
    <loc>https://letmeglowup.com/#settings</loc>
    <priority>0.6</priority>
  </url>
</urlset>
-->
<!-- Page speed optimization: defer non-critical JS, use async where possible, preload CSS, optimize images, and use responsive design. -->
    <header class="shadow-md bg-white sticky top-0 z-50">
      <nav
        class="container mx-auto flex items-center justify-between py-4 px-4 md:px-8"
      >
        <a
          href="index.html"
          class="text-2xl font-bold text-[#ff69b4] tracking-tight logo"
          >Let Me Glow Up</a
        >
        <button class="md:hidden block" id="nav-toggle" aria-label="Open Menu">
          <svg class="w-6 h-6" fill="none" stroke="#a97a5a" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <ul class="hidden md:flex space-x-6 font-medium items-center">
          <li><a href="fashion.html" class="hover:text-[#ff69b4]" data-i18n="nav.fashion">Fashion</a></li>
          <li><a href="glow.html" class="hover:text-[#ff69b4]" data-i18n="nav.glow">Glow</a></li>
          <li><a href="shop.html" class="hover:text-[#ff69b4]" data-i18n="nav.shop">Shop</a></li>
          <li><a href="courses.html" class="hover:text-[#ff69b4]" data-i18n="nav.courses">Courses</a></li>
          <li><a href="ai-tools.html" class="hover:text-[#ff69b4]" data-i18n="nav.aitools">AI Tools</a></li>
          <li><a href="quiz.html" class="hover:text-[#ff69b4]" data-i18n="nav.quiz">Quiz</a></li>
          <li><a href="about.html" class="hover:text-[#ff69b4]" data-i18n="nav.about">About</a></li>
          <li><a href="contact.html" class="hover:text-[#ff69b4]" data-i18n="nav.contact">Contact</a></li>
          <li>
            <select id="lang-switcher" class="ml-4 px-2 py-1 rounded border border-soft-beige text-sm bg-white">
              <option value="en">English</option>
              <option value="ar">العربية</option>
              <option value="fr">Français</option>
            </select>
          </li>
        </ul>
        <form
          action="search-results.html"
          method="get"
          class="hidden md:block ml-6"
        >
          <input
            type="text"
            name="q"
            placeholder="Search..."
            class="rounded-full px-3 py-1 border border-[#fdf6f0] focus:outline-none focus:ring-2 focus:ring-[#ff69b4]"
          />
          <button type="submit" class="ml-2 text-[#ff69b4]">🔍</button>
        </form>
      <div class="flex items-center gap-4 ml-4">
        <a href="#" class="relative group" id="wishlist-header-link" aria-label="Wishlist">
          <svg id="wishlist-header-icon" class="w-7 h-7 text-pop-pink group-hover:text-glossy-brown transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 21s-6.5-5.2-9-8.5C-1.5 7.5 2.5 3 7 5.5c2.1 1.2 3 2.5 5 5.5 2-3 2.9-4.3 5-5.5C21.5 3 25.5 7.5 21 12.5c-2.5 3.3-9 8.5-9 8.5z"/></svg>
          <span id="wishlist-counter" class="absolute -top-2 -right-2 bg-pop-pink text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">0</span>
        </a>
        <a href="#" class="relative group" id="recently-viewed-header-link" aria-label="Recently Viewed">
          <svg class="w-7 h-7 text-glossy-brown group-hover:text-pop-pink transition" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
        </a>
      </div>
      </nav>
      <!-- Settings Button -->
      <button id="settings-btn" class="ml-2 p-2 rounded-full hover:bg-soft-beige focus:outline-none" aria-label="Settings">
        <svg class="w-7 h-7 text-glossy-brown" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09A1.65 1.65 0 0 0 8 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.6 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09A1.65 1.65 0 0 0 4.6 8a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 8 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 1 1 4 0v.09A1.65 1.65 0 0 0 16 4.6a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 8c.14.31.22.65.22 1v.09A1.65 1.65 0 0 0 21 12c0 .35-.08.69-.22 1z"/></svg>
      </button>
      <!-- Mobile Menu -->
      <div id="mobile-menu" class="md:hidden hidden bg-white px-4 pb-4">
        <ul class="flex flex-col space-y-2">
          <li>
            <a href="fashion.html" class="hover:text-[#ff69b4]">Fashion</a>
          </li>
          <li><a href="glow.html" class="hover:text-[#ff69b4]">Glow</a></li>
          <li><a href="shop.html" class="hover:text-[#ff69b4]">Shop</a></li>
          <li>
            <a href="courses.html" class="hover:text-[#ff69b4]">Courses</a>
          </li>
          <li>
            <a href="ai-tools.html" class="hover:text-[#ff69b4]">AI Tools</a>
          </li>
          <li><a href="quiz.html" class="hover:text-[#ff69b4]">Quiz</a></li>
          <li><a href="about.html" class="hover:text-[#ff69b4]">About</a></li>
          <li>
            <a href="contact.html" class="hover:text-[#ff69b4]">Contact</a>
          </li>
        </ul>
        <form action="search-results.html" method="get" class="mt-4">
          <input
            type="text"
            name="q"
            placeholder="Search..."
            class="rounded-full px-3 py-1 border border-[#fdf6f0] w-full focus:outline-none focus:ring-2 focus:ring-[#ff69b4]"
          />
          <button type="submit" class="mt-2 w-full text-[#ff69b4]">🔍</button>
        </form>
      </div>
    </header>
    <main>
      <!-- Hero Section: Animated Gradient, Floating Elements, AOS Animations -->
      <section
        class="relative min-h-screen flex items-center justify-center overflow-hidden px-4 bg-gradient-to-br from-pop-pink to-glossy-brown"
        style="
          background: linear-gradient(
            120deg,
            var(--pop-pink) 0%,
            var(--glossy-brown) 100%
          );
        "
      >
        <!-- Floating Decorative Elements -->
        <span
          class="absolute top-10 left-10 w-24 h-24 rounded-full bg-pop-pink opacity-30 blur-2xl animate-float-slow"
          aria-hidden="true"
        ></span>
        <span
          class="absolute bottom-16 right-16 w-32 h-32 rounded-full bg-glossy-brown opacity-20 blur-2xl animate-float"
          aria-hidden="true"
        ></span>
        <span
          class="absolute top-1/2 left-1/4 w-16 h-16 rounded-full bg-cream-white opacity-20 blur-2xl animate-float-fast"
          aria-hidden="true"
        ></span>
        <div class="container z-10">
          <div class="text-center text-white" data-aos="fade-up">
            <h1
              class="text-5xl md:text-6xl font-extrabold mb-6 animate-fade-in drop-shadow-lg"
            >
              Transform Your Beauty Journey
            </h1>
            <p
              class="text-xl md:text-2xl mb-8 opacity-90 animate-fade-in"
              style="animation-delay: 0.2s"
            >
              AI-powered beauty recommendations personalized for you
            </p>
            <a
              href="shop.html"
              class="btn bg-cream-white text-deep-black shadow-lg hover:bg-pop-pink hover:text-white transition animate-fade-in"
              style="animation-delay: 0.4s"
            >
              Start Your Glow Up
            </a>
          </div>
        </div>
        <!-- End Floating Elements -->
               </section>
 
      <!-- AI Tools Showcase Section -->
      <section class="py-16 px-4 bg-soft-beige">
        <div class="container">
          <h2
            class="text-3xl md:text-4xl font-bold text-center mb-10 text-glossy-brown"
            data-aos="fade-up"
          >
            AI Tools to Glow Up Your Beauty Routine
          </h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Skincare Analyzer -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center transition hover-glow hover:scale-105"
              data-aos="fade-up"
              data-aos-delay="100"
            >
              <span class="mb-4 text-pop-pink text-5xl">
                <svg
                  width="48"
                  height="48"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 2a7 7 0 0 1 7 7c0 4.418-7 13-7 13S5 13.418 5 9a7 7 0 0 1 7-7Zm0 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
                  />
                </svg>
              </span>
              <h3 class="font-semibold text-xl mb-2 text-deep-black">
                Skincare Analyzer
              </h3>
              <p class="text-gray-600 mb-4">
                Personalized skincare routines powered by AI. Analyze your skin
                and get expert recommendations.
              </p>
              <a
                href="ai-tools.html#skincare"
                class="text-pop-pink font-semibold hover-underline transition"
                >Learn More →</a
              >
            </div>
            <!-- Style Matcher -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center transition hover-glow hover:scale-105"
              data-aos="fade-up"
              data-aos-delay="200"
            >
              <span class="mb-4 text-glossy-brown text-5xl">
                <svg
                  width="48"
                  height="48"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12 2c2.21 0 4 1.79 4 4v2h2a2 2 0 0 1 2 2v2.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h2V6c0-2.21 1.79-4 4-4Zm0 0v4"
                  />
                </svg>
              </span>
              <h3 class="font-semibold text-xl mb-2 text-deep-black">
                Style Matcher
              </h3>
              <p class="text-gray-600 mb-4">
                Upload a photo and let AI suggest outfits that match your unique
                style and preferences.
              </p>
              <a
                href="ai-tools.html#style"
                class="text-pop-pink font-semibold hover-underline transition"
                >Learn More →</a
              >
            </div>
            <!-- Look Builder -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center transition hover-glow hover:scale-105"
              data-aos="fade-up"
              data-aos-delay="300"
            >
              <span class="mb-4 text-pop-pink text-5xl">
                <svg
                  width="48"
                  height="48"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  viewBox="0 0 24 24"
                >
                  <circle cx="12" cy="8" r="4" />
                  <path d="M2 20c0-2.21 3.582-4 8-4s8 1.79 8 4" />
                </svg>
              </span>
              <h3 class="font-semibold text-xl mb-2 text-deep-black">
                Look Builder
              </h3>
              <p class="text-gray-600 mb-4">
                Create complete makeup looks with AI. Get step-by-step guides
                and product suggestions.
              </p>
              <a
                href="ai-tools.html#look"
                class="text-pop-pink font-semibold hover-underline transition"
                >Learn More →</a
              >
            </div>
            <!-- Trend Finder -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center transition hover-glow hover:scale-105"
              data-aos="fade-up"
              data-aos-delay="400"
            >
              <span class="mb-4 text-glossy-brown text-5xl">
                <svg
                  width="48"
                  height="48"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                  viewBox="0 0 24 24"
                >
                  <path d="M3 17l6-6 4 4 8-8" />
                  <circle cx="19" cy="5" r="2" />
                </svg>
              </span>
              <h3 class="font-semibold text-xl mb-2 text-deep-black">
                Trend Finder
              </h3>
              <p class="text-gray-600 mb-4">
                Discover trending beauty and fashion products, curated by AI for
                your needs.
              </p>
              <a
                href="ai-tools.html#trend"
                class="text-pop-pink font-semibold hover-underline transition"
                >Learn More →</a
              >
            </div>
          </div>
        </div>
      </section>
      </section>
      <!-- Customer Testimonials Section -->
      <section class="relative py-16 px-4 bg-cream-white overflow-hidden">
        <!-- Subtle Beauty Pattern Background -->
        <div
          class="absolute inset-0 pointer-events-none opacity-10 z-0"
          aria-hidden="true"
          style="
            background-image: url('assets/images/pattern-leaves.svg'),
              url('assets/images/pattern-dots.svg');
            background-repeat: repeat, repeat;
            background-size: 320px, 120px;
          "
        ></div>
        <div class="container relative z-10">
          <!-- Trust Badges & Stats -->
          <div
            class="flex flex-col md:flex-row items-center justify-between mb-10 gap-6"
          >
            <div class="flex items-center gap-4">
              <img
                src="assets/images/badge-verified.svg"
                alt="Verified"
                class="w-10 h-10"
              />
              <span class="font-semibold text-glossy-brown text-lg"
                >Trusted by 10,000+ Glow Getters</span
              >
            </div>
            <div class="flex items-center gap-4">
              <span class="flex text-yellow-400 text-2xl">★★★★★</span>
              <span class="text-gray-700 font-medium"
                >4.9/5.0 (2,134 reviews)</span
              >
            </div>
            <div class="flex items-center gap-4">
              <img
                src="assets/images/badge-gdpr.svg"
                alt="GDPR Compliant"
                class="w-10 h-10"
              />
              <span class="font-semibold text-glossy-brown text-lg"
                >GDPR Compliant</span
              >
            </div>
          </div>
          <!-- Testimonials Carousel/Grid -->
          <div
            class="testimonials-carousel grid grid-cols-1 md:grid-cols-3 gap-8"
            data-aos="fade-up"
          >
            <!-- Testimonial 1 -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center shadow-lg"
            >
              <img
                src="assets/images/customer1.jpg"
                alt="Ava, 28"
                class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-pop-pink"
              />
              <h4 class="font-semibold text-lg text-deep-black mb-1">
                Ava, 28
              </h4>
              <div class="flex text-yellow-400 mb-2">★★★★★</div>
              <blockquote class="italic text-gray-700 mb-2">
                “I never felt so confident in my skin! The AI skincare tool gave
                me a routine that actually works.”
              </blockquote>
            </div>
            <!-- Testimonial 2 -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center shadow-lg"
            >
              <img
                src="assets/images/customer2.jpg"
                alt="Fatima, 34"
                class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-glossy-brown"
              />
              <h4 class="font-semibold text-lg text-deep-black mb-1">
                Fatima, 34
              </h4>
              <div class="flex text-yellow-400 mb-2">★★★★★</div>
              <blockquote class="italic text-gray-700 mb-2">
                “The style matcher is a game changer. I get outfit ideas that
                fit my vibe and body type!”
              </blockquote>
            </div>
            <!-- Testimonial 3 -->
            <div
              class="glass-card p-8 flex flex-col items-center text-center shadow-lg"
            >
              <img
                src="assets/images/customer3.jpg"
                alt="Sophie, 22"
                class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-pop-pink"
              />
              <h4 class="font-semibold text-lg text-deep-black mb-1">
                Sophie, 22
              </h4>
              <div class="flex text-yellow-400 mb-2">★★★★★</div>
              <blockquote class="italic text-gray-700 mb-2">
                “I love the look builder! My makeup skills have leveled up and
                my friends noticed the glow.”
              </blockquote>
            </div>
          </div>
        </div>
        <!-- Simple Carousel for Mobile (JS) -->
        <script>
          // Simple sliding carousel for mobile view
          if (window.innerWidth < 768) {
            const carousel = document.querySelector(".testimonials-carousel");
            let startX = 0,
              scrollLeft = 0;
            carousel.style.overflowX = "auto";
            carousel.style.display = "flex";
            carousel.style.scrollSnapType = "x mandatory";
            Array.from(carousel.children).forEach((card) => {
              card.style.minWidth = "80%";
              card.style.scrollSnapAlign = "center";
              card.style.marginRight = "1rem";
            });
            carousel.addEventListener("touchstart", (e) => {
              startX = e.touches[0].pageX - carousel.offsetLeft;
              scrollLeft = carousel.scrollLeft;
            });
            carousel.addEventListener("touchmove", (e) => {
              const x = e.touches[0].pageX - carousel.offsetLeft;
              const walk = startX - x;
              carousel.scrollLeft = scrollLeft + walk;
            });
          }
        </script>

      <!-- Trending Products Section -->
      <section class="py-16 px-4 bg-soft-beige">
        <div class="container">
          <h2
            class="text-3xl md:text-4xl font-bold text-center mb-8 text-glossy-brown"
            data-aos="fade-up"
          >
            Trending Beauty & Fashion Products
          </h2>
          <!-- Category Filter Tabs -->
          <div
            class="flex flex-wrap justify-center gap-3 mb-8"
            id="product-filters"
          >
            <button
              class="btn bg-pop-pink text-white px-5 py-2 rounded-full font-semibold transition hover:bg-glossy-brown"
              data-filter="all"
            >
              All
            </button>
            <button
              class="btn bg-cream-white text-pop-pink border border-pop-pink px-5 py-2 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white"
              data-filter="skincare"
            >
              Skincare
            </button>
            <button
              class="btn bg-cream-white text-pop-pink border border-pop-pink px-5 py-2 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white"
              data-filter="makeup"
            >
              Makeup
            </button>
            <button
              class="btn bg-cream-white text-pop-pink border border-pop-pink px-5 py-2 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white"
              data-filter="fashion"
            >
              Fashion
            </button>
          </div>
          <!-- Product Grid -->
          <div
            class="product-grid grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"
            id="products-list"
          >
            <!-- Product Card Example -->
            <div
              class="product-card group relative overflow-hidden transition hover-glow hover:scale-105"
              data-category="skincare"
              data-aos="fade-up"
            >
              <div class="relative">
                <img
                  src="assets/images/product1.jpg"
                  alt="Glow Serum"
                  class="w-full h-56 object-cover rounded-t-lg"
                />
                <span class="product-badge bg-pop-pink">SAVE 20%</span>
              </div>
              <div class="p-4">
                <h3 class="font-semibold text-deep-black text-lg mb-1">
                  Glow Serum
                </h3>
                <div class="flex items-center mt-1 mb-2">
                  <span class="text-pop-pink font-bold text-lg">$32.00</span>
                  <span class="text-gray-500 line-through ml-2">$40.00</span>
                </div>
                <div class="flex items-center mb-2">
                  <div class="flex text-yellow-400 text-base">★★★★★</div>
                  <span class="text-sm text-gray-600 ml-2">(87 reviews)</span>
                </div>
                <div class="flex gap-2 mt-4">
                  <button
                    class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1"
                  >
                    ♡ Wishlist
                  </button>
                  <a
                    href="#"
                    class="btn bg-pop-pink text-white px-4 py-1 rounded-full font-semibold transition hover:bg-glossy-brown text-sm flex-1"
                    >View Details</a
                  >
                </div>
              </div>
            </div>
            <!-- Product Card Example 2 -->
            <div
              class="product-card group relative overflow-hidden transition hover-glow hover:scale-105"
              data-category="makeup"
              data-aos="fade-up"
              data-aos-delay="100"
            >
              <div class="relative">
                <img
                  src="assets/images/product2.jpg"
                  alt="Luxe Lipstick"
                  class="w-full h-56 object-cover rounded-t-lg"
                />
                <span class="product-badge bg-pop-pink">SAVE 15%</span>
              </div>
              <div class="p-4">
                <h3 class="font-semibold text-deep-black text-lg mb-1">
                  Luxe Lipstick
                </h3>
                <div class="flex items-center mt-1 mb-2">
                  <span class="text-pop-pink font-bold text-lg">$21.25</span>
                  <span class="text-gray-500 line-through ml-2">$25.00</span>
                </div>
                <div class="flex items-center mb-2">
                  <div class="flex text-yellow-400 text-base">★★★★☆</div>
                  <span class="text-sm text-gray-600 ml-2">(54 reviews)</span>
                </div>
                <div class="flex gap-2 mt-4">
                  <button
                    class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1"
                  >
                    ♡ Wishlist
                  </button>
                  <a
                    href="#"
                    class="btn bg-pop-pink text-white px-4 py-1 rounded-full font-semibold transition hover:bg-glossy-brown text-sm flex-1"
                    >View Details</a
                  >
                </div>
              </div>
            </div>
            <!-- Product Card Example 3 -->
            <div
              class="product-card group relative overflow-hidden transition hover-glow hover:scale-105"
              data-category="fashion"
              data-aos="fade-up"
              data-aos-delay="200"
            >
              <div class="relative">
                <img
                  src="assets/images/product3.jpg"
                  alt="Chic Tote Bag"
                  class="w-full h-56 object-cover rounded-t-lg"
                />
                <span class="product-badge bg-pop-pink">SAVE 10%</span>
              </div>
              <div class="p-4">
                <h3 class="font-semibold text-deep-black text-lg mb-1">
                  Chic Tote Bag
                </h3>
                <div class="flex items-center mt-1 mb-2">
                  <span class="text-pop-pink font-bold text-lg">$45.00</span>
                  <span class="text-gray-500 line-through ml-2">$50.00</span>
                </div>
                <div class="flex items-center mb-2">
                  <div class="flex text-yellow-400 text-base">★★★★★</div>
                  <span class="text-sm text-gray-600 ml-2">(112 reviews)</span>
                </div>
                <div class="flex gap-2 mt-4">
                  <button
                    class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1"
                  >
                    ♡ Wishlist
                  </button>
                  <a
                    href="#"
                    class="btn bg-pop-pink text-white px-4 py-1 rounded-full font-semibold transition hover:bg-glossy-brown text-sm flex-1"
                    >View Details</a
                  >
                </div>
              </div>
            </div>
            <!-- Product Card Example 4 -->
            <div
              class="product-card group relative overflow-hidden transition hover-glow hover:scale-105"
              data-category="skincare"
              data-aos="fade-up"
              data-aos-delay="300"
            >
              <div class="relative">
                <img
                  src="assets/images/product4.jpg"
                  alt="Hydra Face Mask"
                  class="w-full h-56 object-cover rounded-t-lg"
                />
                <span class="product-badge bg-pop-pink">SAVE 25%</span>
              </div>
              <div class="p-4">
                <h3 class="font-semibold text-deep-black text-lg mb-1">
                  Hydra Face Mask
                </h3>
                <div class="flex items-center mt-1 mb-2">
                  <span class="text-pop-pink font-bold text-lg">$18.75</span>
                  <span class="text-gray-500 line-through ml-2">$25.00</span>
                </div>
                <div class="flex items-center mb-2">
                  <div class="flex text-yellow-400 text-base">★★★★☆</div>
                  <span class="text-sm text-gray-600 ml-2">(39 reviews)</span>
                </div>
                <div class="flex gap-2 mt-4">
                  <button
                    class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1"
                  >
                    ♡ Wishlist
                  </button>
                  <a
                    href="#"
                    class="btn bg-pop-pink text-white px-4 py-1 rounded-full font-semibold transition hover:bg-glossy-brown text-sm flex-1"
                    >View Details</a
                  >
                </div>
              </div>
            </div>
            <!-- Add more product cards as needed -->
          </div>
        </div>
        <script>
          // Product filter logic
          document
            .querySelectorAll("#product-filters button")
            .forEach((btn) => {
              btn.addEventListener("click", function () {
                const filter = this.getAttribute("data-filter");
                document
                  .querySelectorAll("#product-filters button")
                  .forEach((b) =>
                    b.classList.remove("bg-pop-pink", "text-white")
                  );
                this.classList.add("bg-pop-pink", "text-white");
                document
                  .querySelectorAll("#products-list .product-card")
                  .forEach((card) => {
                    if (
                      filter === "all" ||
                      card.getAttribute("data-category") === filter
                    ) {
                      card.style.display = "";
                    } else {
                      card.style.display = "none";
                    }
                  });
              });
            });
        </script>
      </section>
      <!-- Newsletter Signup Section -->
      <section class="relative py-16 px-4 bg-gradient-to-br from-pop-pink to-soft-beige overflow-hidden">
        <!-- Decorative Floating Elements -->
        <span class="absolute top-8 left-8 w-24 h-24 rounded-full bg-pop-pink opacity-20 blur-2xl animate-float-slow" aria-hidden="true"></span>
        <span class="absolute bottom-8 right-16 w-32 h-32 rounded-full bg-glossy-brown opacity-10 blur-2xl animate-float" aria-hidden="true"></span>
        <div class="container relative z-10 flex flex-col items-center justify-center">
          <div class="newsletter max-w-xl w-full glass-card p-8 text-center shadow-lg" data-aos="fade-up">
            <div class="flex flex-col items-center mb-4">
              <img src="assets/images/newsletter-visual.jpg" alt="Beauty Inspiration" class="w-32 h-32 object-cover rounded-2xl shadow-lg mb-3 animate-fade-in" style="animation-delay:0.05s" loading="lazy" />
              <img src="assets/images/logo.svg" alt="LetMeGlowUp Logo" class="w-16 h-16 mb-2 animate-fade-in" style="animation-delay:0.1s" />
              <h2 class="text-2xl md:text-3xl font-extrabold mb-1 text-glossy-brown tracking-tight animate-fade-in" style="animation-delay:0.15s">LetMeGlowUp Newsletter</h2>
              <span class="inline-flex items-center gap-1 text-pop-pink font-bold animate-sparkle" style="animation-delay:0.2s">
                <svg class="w-6 h-6 animate-spin-slow" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.07-7.07l-1.42 1.42M6.34 17.66l-1.42 1.42m12.02 0l-1.42-1.42M6.34 6.34L4.92 4.92"/></svg>
                Glow up your inbox!
              </span>
            </div>
            <p class="mb-4 text-gray-700 animate-fade-in" style="animation-delay:0.25s">Join <span class="font-semibold text-pop-pink" id="subscriber-count">12,500+</span> glow-getters and receive weekly beauty secrets, trends, and special deals!</p>
            <form id="newsletter-form" class="flex flex-col gap-4 items-center">
              <input type="email" id="newsletter-email" name="email" required placeholder="Enter your email" class="w-full max-w-xs px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black" autocomplete="email" aria-required="true" aria-describedby="newsletter-email-error" aria-invalid="false" />
              <span id="newsletter-email-error" class="text-pop-pink text-sm mt-1 block" role="alert" aria-live="polite"></span>
              <div class="flex items-center gap-2 text-left w-full max-w-xs mx-auto">
                <input type="checkbox" id="newsletter-gdpr" required aria-required="true" class="accent-pop-pink" />
                <label for="newsletter-gdpr" class="text-xs text-gray-700">I agree to the <a href="privacy.html" class="underline text-pop-pink">privacy policy</a> and to receive emails from LetMeGlowUp.</label>
              </div>
              <button type="submit" id="newsletter-submit" class="btn bg-pop-pink text-white w-full max-w-xs flex items-center justify-center gap-2" aria-busy="false">
                <span id="newsletter-submit-text" class="flex items-center gap-2">
                  <svg class="w-5 h-5 text-cream-white animate-bounce" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 01.894.553l2.382 4.824 5.326.773a1 1 0 01.554 1.707l-3.85 3.753.909 5.303a1 1 0 01-1.451 1.054L10 16.347l-4.768 2.5A1 1 0 013.78 17.8l.91-5.303-3.85-3.753a1 1 0 01.554-1.707l5.326-.773L9.106 2.553A1 1 0 0110 2z"/></svg>
                  Subscribe
                </span>
                <span id="newsletter-spinner" class="hidden animate-spin ml-2 w-5 h-5 border-2 border-white border-t-transparent rounded-full"></span>
              </button>
              <div id="newsletter-message" class="w-full text-center text-sm mt-2" aria-live="polite"></div>
              <canvas id="newsletter-confetti" class="pointer-events-none absolute left-0 top-0 w-full h-full z-50" style="display:none;"></canvas>
              <div class="w-full text-center text-xs mt-1 text-gray-500">You can unsubscribe at any time. We respect your privacy.</div>
            </form>
          </div>
        </div>
        <script>
          // Fake subscriber count animation
          const countEl = document.getElementById('subscriber-count');
          let count = 12480;
          const target = 12500;
          if (countEl) {
            const interval = setInterval(() => {
              if (count < target) {
                count += Math.floor(Math.random() * 3) + 1;
                countEl.textContent = count.toLocaleString();
              } else {
                countEl.textContent = target.toLocaleString();
                clearInterval(interval);
              }
            }, 60);
          }
          // Newsletter form validation and feedback
          // Newsletter form: double opt-in, API, GDPR, unsubscribe, error handling
          // Animation helpers
          function confettiBurst() {
            const canvas = document.getElementById('newsletter-confetti');
            if (!canvas) return;
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            const ctx = canvas.getContext('2d');
            const colors = ['#ff69b4','#fdf6f0','#b47b5b','#fffefc','#ffb6e6'];
            let particles = [];
            for (let i=0;i<80;i++) {
              particles.push({
                x: Math.random()*canvas.width,
                y: canvas.height+10,
                r: Math.random()*6+4,
                d: Math.random()*canvas.height/2+canvas.height/4,
                color: colors[Math.floor(Math.random()*colors.length)],
                tilt: Math.random()*10-5,
                tiltAngle: 0,
                tiltAngleInc: Math.random()*0.07+0.05
              });
            }
            canvas.style.display = 'block';
            let frame = 0;
            function draw() {
              ctx.clearRect(0,0,canvas.width,canvas.height);
              for (let p of particles) {
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.r, 0, 2*Math.PI);
                ctx.fillStyle = p.color;
                ctx.globalAlpha = 0.8;
                ctx.fill();
                ctx.globalAlpha = 1;
              }
            }
            function update() {
              for (let p of particles) {
                p.y -= (Math.cos(frame/10)+2+p.r/2)/2;
                p.x += Math.sin(frame/15+p.tilt)*2;
                p.tiltAngle += p.tiltAngleInc;
                p.tilt = Math.sin(p.tiltAngle)*10;
              }
              frame++;
            }
            let anim = setInterval(()=>{
              draw();
              update();
              if (frame>60) {
                clearInterval(anim);
                canvas.style.display = 'none';
              }
            }, 16);
          }
          (function(){
            const form = document.getElementById('newsletter-form');
            if (!form) return;
            const emailInput = form.querySelector('#newsletter-email');
            const gdprCheck = form.querySelector('#newsletter-gdpr');
            const errorBox = form.querySelector('#newsletter-email-error');
            const msgBox = form.querySelector('#newsletter-message');
            const submitBtn = form.querySelector('#newsletter-submit');
            const submitText = form.querySelector('#newsletter-submit-text');
            const spinner = form.querySelector('#newsletter-spinner');
            let doubleOptInToken = null;

            // Email validation regex (RFC 5322 simplified)
            function validateEmail(val) {
              return /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(val);
            }

            // Real-time validation
            emailInput.addEventListener('input', function() {
              errorBox.textContent = '';
              emailInput.setAttribute('aria-invalid', 'false');
              if (!validateEmail(emailInput.value.trim())) {
                errorBox.textContent = 'Please enter a valid email address.';
                emailInput.setAttribute('aria-invalid', 'true');
              }
            });

            // Unsubscribe handler (for demo, just a link in thank you message)
            function showUnsubscribe(email) {
              msgBox.innerHTML = `You are subscribed as <span class='font-semibold text-pop-pink'>${email}</span>.<br><a href="#" id="newsletter-unsub" class="underline text-pop-pink">Unsubscribe</a>`;
              msgBox.className = 'w-full text-center text-glossy-brown text-sm mt-2';
              const unsub = document.getElementById('newsletter-unsub');
              if (unsub) {
                unsub.onclick = function(e) {
                  e.preventDefault();
                  // Simulate API call
                  msgBox.textContent = 'Unsubscribing...';
                  setTimeout(()=>{
                    msgBox.textContent = 'You have been unsubscribed. We are sad to see you go!';
                    msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
                  }, 1200);
                };
              }
            }

            form.addEventListener('submit', function(e) {
              e.preventDefault();
              errorBox.textContent = '';
              msgBox.textContent = '';
              msgBox.className = 'w-full text-center text-sm mt-2';
              emailInput.setAttribute('aria-invalid', 'false');
              const email = emailInput.value.trim();
              if (!validateEmail(email)) {
                errorBox.textContent = 'Please enter a valid email address.';
                emailInput.setAttribute('aria-invalid', 'true');
                return;
              }
              if (!gdprCheck.checked) {
                msgBox.textContent = 'You must agree to the privacy policy.';
                msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
                return;
              }
              // Loading state
              submitBtn.setAttribute('aria-busy', 'true');
              submitBtn.disabled = true;
              spinner.classList.remove('hidden');
              submitText.textContent = 'Subscribing...';

              // Simulate API call to email service (replace with real endpoint)
              fetch('https://api.example.com/newsletter/subscribe', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email })
              })
              .then(async r => {
                if (r.status === 409) throw new Error('duplicate');
                if (!r.ok) throw new Error('api');
                // Simulate double opt-in: API returns a token
                const data = await r.json();
                doubleOptInToken = data.token || 'demo-token';
                // Show double opt-in message
                msgBox.innerHTML = 'Please check your inbox and click the confirmation link to complete your subscription.';
                msgBox.className = 'w-full text-center text-glossy-brown text-sm mt-2';
                // Simulate user clicking confirmation link (for demo)
                setTimeout(()=>{
                  // Simulate confirmation API call
                  fetch('https://api.example.com/newsletter/confirm', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ token: doubleOptInToken })
                  })
                  .then(r2 => {
                    if (!r2.ok) throw new Error('confirm');
                    // Success: show thank you and unsubscribe link, then redirect
                    confettiBurst();
                    showUnsubscribe(email);
                    setTimeout(()=>{ window.location.href = '/thank-you.html'; }, 2500);
                  })
                  .catch(()=>{
                    msgBox.textContent = 'Confirmation failed. Please try again.';
                    msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
                  });
                }, 1800);
              })
              .catch(err => {
                if (err.message === 'duplicate') {
                  msgBox.textContent = 'This email is already subscribed.';
                  msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
                } else {
                  msgBox.textContent = 'Subscription failed. Please try again later.';
                  msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
                }
              })
              .finally(()=>{
                submitBtn.setAttribute('aria-busy', 'false');
                submitBtn.disabled = false;
                spinner.classList.add('hidden');
                submitText.textContent = 'Subscribe';
                form.reset();
              });
            });
          })();
        </script>
      </section>
           <!-- Beauty Assessment Form Section -->
      <section class="py-16 px-4 bg-cream-white">
        <div class="container max-w-xl mx-auto">
          <div class="glass-card p-8 shadow-lg" data-aos="fade-up">
            <img src="assets/images/beauty-assess-visual.jpg" alt="Beauty Assessment" class="w-32 h-32 object-cover rounded-2xl shadow-lg mb-3 mx-auto animate-fade-in" style="animation-delay:0.05s" loading="lazy" />
            <h2 class="text-2xl md:text-3xl font-bold mb-2 text-glossy-brown text-center">Beauty Assessment</h2>
            <div class="mb-4 text-gray-700 text-center" id="beauty-assess-desc">Discover your beauty score and get personalized tips!</div>
            <div class="w-full mb-6">
              <div class="h-2 bg-soft-beige rounded-full overflow-hidden">
                <div id="beauty-assess-progress" class="h-2 bg-pop-pink rounded-full transition-all duration-300" style="width:0%"></div>
              </div>
              <div class="flex justify-between text-xs mt-1 text-pop-pink">
                <span id="beauty-assess-step-label">Step 1</span>
                <span id="beauty-assess-step-total">/ 5</span>
              </div>
            </div>
            <form id="beauty-assess-form" class="flex flex-col gap-6"></form>
            <div id="beauty-assess-result" class="hidden mt-6 text-center"></div>
            <button id="beauty-assess-restart" class="btn bg-soft-beige text-pop-pink mt-6 hidden mx-auto">Restart Assessment</button>
          </div>
        </div>
        <script>
        // Beauty Assessment Data
        const beautyAssessData = [
          {
            id: 'skinCare',
            type: 'multiple',
            label: 'How often do you follow a skincare routine?',
            options: [
              { value: 'daily', label: 'Daily', score: 3 },
              { value: 'sometimes', label: 'Sometimes', score: 2 },
              { value: 'rarely', label: 'Rarely', score: 1 }
            ]
          },
          {
            id: 'water',
            type: 'multiple',
            label: 'How much water do you drink per day?',
            options: [
              { value: '2l', label: '2L or more', score: 3 },
              { value: '1l', label: '1-2L', score: 2 },
              { value: 'less', label: 'Less than 1L', score: 1 }
            ]
          },
          {
            id: 'sleep',
            type: 'multiple',
            label: 'How many hours do you sleep on average?',
            options: [
              { value: '8', label: '8+ hours', score: 3 },
              { value: '6', label: '6-8 hours', score: 2 },
              { value: 'less', label: 'Less than 6 hours', score: 1 }
            ]
          },
          {
            id: 'makeup',
            type: 'multiple',
            label: 'How often do you wear makeup?',
            options: [
              { value: 'daily', label: 'Daily', score: 2 },
              { value: 'occasionally', label: 'Occasionally', score: 3 },
              { value: 'never', label: 'Never', score: 1 }
            ],
            showIf: (answers) => answers.skinCare === 'daily' || answers.skinCare === 'sometimes'
          },
          {
            id: 'stress',
            type: 'multiple',
            label: 'How would you rate your stress level?',
            options: [
              { value: 'low', label: 'Low', score: 3 },
              { value: 'medium', label: 'Medium', score: 2 },
              { value: 'high', label: 'High', score: 1 }
            ]
          },
          {
            id: 'email',
            type: 'email',
            label: 'Enter your email to get your full beauty assessment:',
            showIf: () => true
          }
        ];

        let beautyAssessAnswers = JSON.parse(localStorage.getItem('beautyAssessAnswers')||'{}');
        let beautyAssessStep = parseInt(localStorage.getItem('beautyAssessStep')||'0');

        function renderBeautyAssessStep() {
          const form = document.getElementById('beauty-assess-form');
          form.innerHTML = '';
          // Find visible steps
          const visibleSteps = beautyAssessData.filter(q => !q.showIf || q.showIf(beautyAssessAnswers));
          const step = Math.min(beautyAssessStep, visibleSteps.length-1);
          const q = visibleSteps[step];
          if (!q) return;
          // Progress
          document.getElementById('beauty-assess-progress').style.width = ((step+1)/visibleSteps.length*100)+"%";
          document.getElementById('beauty-assess-step-label').textContent = `Step ${step+1}`;
          document.getElementById('beauty-assess-step-total').textContent = `/ ${visibleSteps.length}`;
          // Question
          const label = document.createElement('label');
          label.className = 'block font-semibold mb-2';
          label.textContent = q.label;
          form.appendChild(label);
          // Input
          let input;
          if (q.type === 'multiple') {
            input = document.createElement('div');
            input.className = 'flex flex-wrap gap-3';
            q.options.forEach(opt => {
              const id = `beauty-assess-${q.id}-${opt.value}`;
              const wrapper = document.createElement('label');
              wrapper.className = 'flex items-center gap-2 cursor-pointer px-3 py-2 rounded-lg border border-soft-beige hover:border-pop-pink transition';
              if (beautyAssessAnswers[q.id] === opt.value) wrapper.classList.add('bg-pop-pink','text-white');
              const radio = document.createElement('input');
              radio.type = 'radio';
              radio.name = q.id;
              radio.value = opt.value;
              radio.required = true;
              radio.className = 'accent-pop-pink';
              radio.id = id;
              if (beautyAssessAnswers[q.id] === opt.value) radio.checked = true;
              radio.onchange = () => {
                beautyAssessAnswers[q.id] = opt.value;
                localStorage.setItem('beautyAssessAnswers', JSON.stringify(beautyAssessAnswers));
                renderBeautyAssessStep();
              };
              wrapper.appendChild(radio);
              const span = document.createElement('span');
              span.textContent = opt.label;
              wrapper.appendChild(span);
              input.appendChild(wrapper);
            });
          } else if (q.type === 'email') {
            input = document.createElement('div');
            input.className = 'flex flex-col items-center gap-2';
            const email = document.createElement('input');
            email.type = 'email';
            email.name = 'email';
            email.required = true;
            email.placeholder = 'Enter your email';
            email.className = 'w-full max-w-xs px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black';
            email.value = beautyAssessAnswers[q.id] || '';
            email.oninput = () => {
              beautyAssessAnswers[q.id] = email.value;
              localStorage.setItem('beautyAssessAnswers', JSON.stringify(beautyAssessAnswers));
            };
            input.appendChild(email);
          }
          form.appendChild(input);
          // Navigation
          const nav = document.createElement('div');
          nav.className = 'flex gap-4 mt-6';
          if (step > 0) {
            const prev = document.createElement('button');
            prev.type = 'button';
            prev.className = 'btn bg-soft-beige text-pop-pink flex-1';
            prev.textContent = 'Back';
            prev.onclick = () => {
              beautyAssessStep = step-1;
              localStorage.setItem('beautyAssessStep', beautyAssessStep);
              renderBeautyAssessStep();
            };
            nav.appendChild(prev);
          }
          const next = document.createElement('button');
          next.type = 'submit';
          next.className = 'btn bg-pop-pink text-white flex-1';
          next.textContent = (step === visibleSteps.length-1) ? 'See Results' : 'Next';
          nav.appendChild(next);
          form.appendChild(nav);
          // Submit handler
          form.onsubmit = function(e) {
            e.preventDefault();
            // Validate
            if (q.type === 'email') {
              const emailVal = form.querySelector('input[type="email"]').value.trim();
              if (!/^\S+@\S+\.\S+$/.test(emailVal)) {
                alert('Please enter a valid email address.');
                return;
              }
            } else if (!beautyAssessAnswers[q.id]) {
              alert('Please select an answer to proceed.');
              return;
            }
            if (step < visibleSteps.length-1) {
              beautyAssessStep = step+1;
              localStorage.setItem('beautyAssessStep', beautyAssessStep);
              renderBeautyAssessStep();
            } else {
              // Show results
              showBeautyAssessResults();
            }
          };
        }

        function showBeautyAssessResults() {
          // Calculate score
          let score = 0, maxScore = 0;
          beautyAssessData.forEach(q => {
            if (q.type === 'multiple' && (!q.showIf || q.showIf(beautyAssessAnswers))) {
              const opt = q.options.find(o => o.value === beautyAssessAnswers[q.id]);
              if (opt) score += opt.score;
              maxScore += Math.max(...q.options.map(o=>o.score));
            }
          });
          // Personalized result
          let resultMsg = '';
          if (score >= maxScore*0.85) {
            resultMsg = '🌟 Excellent! Your beauty habits are on point. Keep glowing!';
          } else if (score >= maxScore*0.6) {
            resultMsg = '✨ Good! You have a solid foundation. A few tweaks can boost your glow.';
          } else {
            resultMsg = '💡 There’s room to improve. Check our tips below to level up your beauty routine!';
          }
          // Render
          const result = document.getElementById('beauty-assess-result');
          result.innerHTML = `<h3 class='text-xl font-bold text-pop-pink mb-2'>Your Beauty Score: ${score} / ${maxScore}</h3>
            <div class='mb-2 text-glossy-brown font-semibold'>${resultMsg}</div>
            <div class='mb-4 text-sm text-gray-700'>A detailed report has been sent to: <span class='font-semibold text-pop-pink'>${beautyAssessAnswers.email||''}</span></div>
            <div class='mt-4 text-xs text-gray-500'>Want to try again? <a href="#" id="beauty-assess-restart-link" class="underline text-pop-pink">Restart</a></div>`;
          document.getElementById('beauty-assess-form').classList.add('hidden');
          result.classList.remove('hidden');
          document.getElementById('beauty-assess-restart').classList.remove('hidden');
          // Save completion
          localStorage.removeItem('beautyAssessStep');
          // Email sending (simulate)
          if (beautyAssessAnswers.email) {
            // Simulate API call
            setTimeout(()=>{
              // Email sent
            }, 1200);
          }
          // Restart link
          const restartLink = document.getElementById('beauty-assess-restart-link');
          if (restartLink) {
            restartLink.onclick = function(e) {
              e.preventDefault();
              restartBeautyAssess();
            };
          }
        }

        function restartBeautyAssess() {
          beautyAssessAnswers = {};
          beautyAssessStep = 0;
          localStorage.removeItem('beautyAssessAnswers');
          localStorage.removeItem('beautyAssessStep');
          document.getElementById('beauty-assess-result').classList.add('hidden');
          document.getElementById('beauty-assess-form').classList.remove('hidden');
          document.getElementById('beauty-assess-restart').classList.add('hidden');
          renderBeautyAssessStep();
        }

        // Restart button
        document.getElementById('beauty-assess-restart').onclick = function(e) {
          e.preventDefault();
          restartBeautyAssess();
        };

        // On load
        renderBeautyAssessStep();
        </script>
      </section>

      <!-- Lead Generation Quiz Section -->
      <section class="py-16 px-4 bg-cream-white">
        <div class="container max-w-xl mx-auto">
          <div class="glass-card p-8 shadow-lg" data-aos="fade-up">
            <h2 class="text-2xl md:text-3xl font-bold mb-2 text-glossy-brown text-center" data-i18n="headings.quiz">Personalized Beauty Quiz</h2>
            <div class="mb-4 text-gray-700 text-center" id="lead-quiz-desc" data-i18n="descriptions.quiz">Discover your beauty profile and get tailored recommendations!</div>
            <div class="w-full mb-6">
              <div class="h-2 bg-soft-beige rounded-full overflow-hidden">
                <div id="lead-quiz-progress" class="h-2 bg-pop-pink rounded-full transition-all duration-300" style="width:0%"></div>
              </div>
              <div class="flex justify-between text-xs mt-1 text-pop-pink">
                <span id="lead-quiz-step-label">Step 1</span>
                <span id="lead-quiz-step-total">/ 4</span>
              </div>
            </div>
            <form id="lead-quiz-form" class="flex flex-col gap-6"></form>
            <div id="lead-quiz-result" class="hidden mt-6 text-center"></div>
          </div>
        </div>
        <script>
        // Lead Generation Quiz Logic
        const leadQuizData = [
          {
            id: 'goal',
            type: 'multiple',
            label: 'What is your main beauty goal?',
            options: [
              { value: 'glow', label: 'Glowing Skin', img: 'assets/images/quiz-glow.png' },
              { value: 'clear', label: 'Clear Acne', img: 'assets/images/quiz-acne.png' },
              { value: 'antiage', label: 'Anti-Aging', img: 'assets/images/quiz-antiage.png' },
              { value: 'style', label: 'Fashion & Style', img: 'assets/images/quiz-style.png' }
            ]
          },
          {
            id: 'skinType',
            type: 'image',
            label: 'Choose your skin type:',
            options: [
              { value: 'oily', label: 'Oily', img: 'assets/images/skin-oily.png' },
              { value: 'dry', label: 'Dry', img: 'assets/images/skin-dry.png' },
              { value: 'combo', label: 'Combination', img: 'assets/images/skin-combo.png' },
              { value: 'sensitive', label: 'Sensitive', img: 'assets/images/skin-sensitive.png' }
            ],
            showIf: (answers) => ['glow','clear','antiage'].includes(answers.goal)
          },
          {
            id: 'fashionStyle',
            type: 'multiple',
            label: 'What best describes your style?',
            options: [
              { value: 'classic', label: 'Classic' },
              { value: 'trendy', label: 'Trendy' },
              { value: 'minimal', label: 'Minimalist' },
              { value: 'bold', label: 'Bold' }
            ],
            showIf: (answers) => answers.goal === 'style'
          },
          {
            id: 'concern',
            type: 'multiple',
            label: 'What is your top concern?',
            options: [
              { value: 'acne', label: 'Acne' },
              { value: 'aging', label: 'Aging' },
              { value: 'darkspots', label: 'Dark Spots' },
              { value: 'dryness', label: 'Dryness' }
            ],
            showIf: (answers) => ['glow','clear','antiage'].includes(answers.goal)
          },
          {
            id: 'budget',
            type: 'slider',
            label: 'What is your monthly beauty budget?',
            min: 20,
            max: 300,
            step: 10,
            unit: '$',
            showIf: () => true
          },
          {
            id: 'email',
            type: 'email',
            label: 'Enter your email to get detailed results:',
            showIf: () => true
          }
        ];

        let leadQuizAnswers = JSON.parse(localStorage.getItem('leadQuizAnswers')||'{}');
        let leadQuizStep = parseInt(localStorage.getItem('leadQuizStep')||'0');

        function renderLeadQuizStep() {
          const form = document.getElementById('lead-quiz-form');
          form.innerHTML = '';
          // Find visible steps
          const visibleSteps = leadQuizData.filter(q => !q.showIf || q.showIf(leadQuizAnswers));
          const step = Math.min(leadQuizStep, visibleSteps.length-1);
          const q = visibleSteps[step];
          if (!q) return;
          // Progress
          document.getElementById('lead-quiz-progress').style.width = ((step+1)/visibleSteps.length*100)+"%";
          document.getElementById('lead-quiz-step-label').textContent = `Step ${step+1}`;
          document.getElementById('lead-quiz-step-total').textContent = `/ ${visibleSteps.length}`;
          // Question
          const label = document.createElement('label');
          label.className = 'block font-semibold mb-2';
          label.textContent = q.label;
          form.appendChild(label);
          // Input
          let input;
          if (q.type === 'multiple') {
            input = document.createElement('div');
            input.className = 'flex flex-wrap gap-3';
            q.options.forEach(opt => {
              const id = `lead-quiz-${q.id}-${opt.value}`;
              const wrapper = document.createElement('label');
              wrapper.className = 'flex items-center gap-2 cursor-pointer px-3 py-2 rounded-lg border border-soft-beige hover:border-pop-pink transition';
              if (leadQuizAnswers[q.id] === opt.value) wrapper.classList.add('bg-pop-pink','text-white');
              const radio = document.createElement('input');
              radio.type = 'radio';
              radio.name = q.id;
              radio.value = opt.value;
              radio.required = true;
              radio.className = 'accent-pop-pink';
              radio.id = id;
              if (leadQuizAnswers[q.id] === opt.value) radio.checked = true;
              radio.onchange = () => {
                leadQuizAnswers[q.id] = opt.value;
                localStorage.setItem('leadQuizAnswers', JSON.stringify(leadQuizAnswers));
                renderLeadQuizStep();
              };
              wrapper.appendChild(radio);
              if (opt.img) {
                const img = document.createElement('img');
                img.src = opt.img;
                img.alt = opt.label;
                img.className = 'w-10 h-10 object-cover rounded-full border border-soft-beige';
                wrapper.appendChild(img);
              }
              const span = document.createElement('span');
              span.textContent = opt.label;
              wrapper.appendChild(span);
              input.appendChild(wrapper);
            });
          } else if (q.type === 'image') {
            input = document.createElement('div');
            input.className = 'flex flex-wrap gap-3 justify-center';
            q.options.forEach(opt => {
              const id = `lead-quiz-${q.id}-${opt.value}`;
              const wrapper = document.createElement('label');
              wrapper.className = 'flex flex-col items-center gap-2 cursor-pointer px-3 py-2 rounded-lg border border-soft-beige hover:border-pop-pink transition';
              if (leadQuizAnswers[q.id] === opt.value) wrapper.classList.add('bg-pop-pink','text-white');
              const radio = document.createElement('input');
              radio.type = 'radio';
              radio.name = q.id;
              radio.value = opt.value;
              radio.required = true;
              radio.className = 'accent-pop-pink mb-1';
              radio.id = id;
              if (leadQuizAnswers[q.id] === opt.value) radio.checked = true;
              radio.onchange = () => {
                leadQuizAnswers[q.id] = opt.value;
                localStorage.setItem('leadQuizAnswers', JSON.stringify(leadQuizAnswers));
                renderLeadQuizStep();
              };
              wrapper.appendChild(radio);
              const img = document.createElement('img');
              img.src = opt.img;
              img.alt = opt.label;
              img.className = 'w-16 h-16 object-cover rounded-full border border-soft-beige';
              wrapper.appendChild(img);
              const span = document.createElement('span');
              span.textContent = opt.label;
              wrapper.appendChild(span);
              input.appendChild(wrapper);
            });
          } else if (q.type === 'slider') {
            input = document.createElement('div');
            input.className = 'flex flex-col items-center gap-2';
            const slider = document.createElement('input');
            slider.type = 'range';
            slider.min = q.min;
            slider.max = q.max;
            slider.step = q.step;
            slider.value = leadQuizAnswers[q.id] || q.min;
            slider.className = 'w-full accent-pop-pink';
            slider.oninput = () => {
              leadQuizAnswers[q.id] = slider.value;
              localStorage.setItem('leadQuizAnswers', JSON.stringify(leadQuizAnswers));
              valueLabel.textContent = `${slider.value}${q.unit}`;
            };
            input.appendChild(slider);
            const valueLabel = document.createElement('span');
            valueLabel.className = 'text-pop-pink font-semibold';
            valueLabel.textContent = `${slider.value}${q.unit}`;
            input.appendChild(valueLabel);
          } else if (q.type === 'email') {
            input = document.createElement('div');
            input.className = 'flex flex-col items-center gap-2';
            const email = document.createElement('input');
            email.type = 'email';
            email.name = 'email';
            email.required = true;
            email.placeholder = 'Enter your email';
            email.className = 'w-full max-w-xs px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black';
            email.value = leadQuizAnswers[q.id] || '';
            email.oninput = () => {
              leadQuizAnswers[q.id] = email.value;
              localStorage.setItem('leadQuizAnswers', JSON.stringify(leadQuizAnswers));
            };
            input.appendChild(email);
          }
          form.appendChild(input);
          // Navigation
          const nav = document.createElement('div');
          nav.className = 'flex gap-4 mt-6';
          if (step > 0) {
            const prev = document.createElement('button');
            prev.type = 'button';
            prev.className = 'btn bg-soft-beige text-pop-pink flex-1';
            prev.textContent = 'Back';
            prev.onclick = () => {
              leadQuizStep = step-1;
              localStorage.setItem('leadQuizStep', leadQuizStep);
              renderLeadQuizStep();
            };
            nav.appendChild(prev);
          }
          const next = document.createElement('button');
          next.type = 'submit';
          next.className = 'btn bg-pop-pink text-white flex-1';
          next.textContent = (step === visibleSteps.length-1) ? 'See Results' : 'Next';
          nav.appendChild(next);
          form.appendChild(nav);
          // Submit handler
          form.onsubmit = function(e) {
            e.preventDefault();
            // Validate
            if (q.type === 'email') {
              const emailVal = form.querySelector('input[type="email"]').value.trim();
              if (!/^\S+@\S+\.\S+$/.test(emailVal)) {
                alert('Please enter a valid email address.');
                return;
              }
            }
            if (step < visibleSteps.length-1) {
              leadQuizStep = step+1;
              localStorage.setItem('leadQuizStep', leadQuizStep);
              renderLeadQuizStep();
            } else {
              // Show results
              showLeadQuizResults();
            }
          };
        }

        function showLeadQuizResults() {
          // Calculate results
          const a = leadQuizAnswers;
          let profile = '';
          let recs = [];
          if (a.goal === 'glow') {
            profile = 'Radiant Glow Seeker';
            recs = ['Vitamin C Serum', 'Hydrating Mask', 'SPF 50 Sunscreen'];
          } else if (a.goal === 'clear') {
            profile = 'Clear Skin Achiever';
            recs = ['Salicylic Acid Cleanser', 'Niacinamide Serum', 'Oil-Free Moisturizer'];
          } else if (a.goal === 'antiage') {
            profile = 'Youthful Glow Advocate';
            recs = ['Retinol Cream', 'Peptide Serum', 'Barrier Repair Cream'];
          } else if (a.goal === 'style') {
            profile = 'Fashion Trendsetter';
            if (a.fashionStyle === 'classic') recs = ['Little Black Dress', 'Pearl Earrings'];
            else if (a.fashionStyle === 'trendy') recs = ['Oversized Blazer', 'Chunky Sneakers'];
            else if (a.fashionStyle === 'minimal') recs = ['White Shirt', 'Tailored Trousers'];
            else if (a.fashionStyle === 'bold') recs = ['Statement Coat', 'Colorful Heels'];
          }
          // Budget-based suggestion
          let budgetMsg = '';
          if (a.budget) {
            if (a.budget < 50) budgetMsg = 'We picked affordable options for you!';
            else if (a.budget < 100) budgetMsg = 'Great value picks for your budget.';
            else budgetMsg = 'Premium recommendations for your glow up!';
          }
          // Render
          const result = document.getElementById('lead-quiz-result');
          result.innerHTML = `<h3 class='text-xl font-bold text-pop-pink mb-2'>${profile}</h3>
            <div class='mb-2 text-glossy-brown font-semibold'>Recommended for you:</div>
            <ul class='mb-4 text-left inline-block'>${recs.map(r=>`<li>• ${r}</li>`).join('')}</ul>
            <div class='mb-2 text-sm text-gray-700'>${budgetMsg}</div>
            <div class='mt-4 text-xs text-gray-500' id='lead-quiz-email-status'>Sending your results to: <span class='font-semibold text-pop-pink'>${a.email||''}</span>...</div>`;
          document.getElementById('lead-quiz-form').classList.add('hidden');
          result.classList.remove('hidden');
          // Clear progress
          localStorage.removeItem('leadQuizStep');

          // Send email via backend
          if (a.email) {
            fetch('/api/send-quiz-results', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                email: a.email,
                profile,
                recommendations: recs,
                budget: a.budget,
                answers: a
              })
            })
            .then(r => r.json())
            .then(data => {
              const status = document.getElementById('lead-quiz-email-status');
              if (data.success) {
                status.textContent = 'A copy of your results has been sent to: ' + a.email;
                status.classList.add('text-pop-pink');
              } else {
                status.textContent = 'Could not send email. Please check your address or try again later.';
                status.classList.add('text-pop-pink');
              }
            })
            .catch(() => {
              const status = document.getElementById('lead-quiz-email-status');
              status.textContent = 'Could not send email. Please check your address or try again later.';
              status.classList.add('text-pop-pink');
            });
          }
        }

        // On load
        renderLeadQuizStep();
        </script>
      </section>
            <!-- Premium AI Tools Showcase Section -->
      <section class="py-16 px-4 bg-soft-beige">
        <div class="container">
          <h2 class="text-3xl md:text-4xl font-bold text-center mb-8 text-glossy-brown" data-aos="fade-up">Unlock Premium AI Beauty Tools</h2>
          <!-- Feature Comparison Table -->
          <div class="overflow-x-auto mb-10" data-aos="fade-up">
            <table class="min-w-full border rounded-lg bg-cream-white text-sm">
              <thead>
                <tr class="bg-soft-beige">
                  <th class="py-3 px-4 text-left font-semibold">Feature</th>
                  <th class="py-3 px-4 text-center font-semibold">Free</th>
                  <th class="py-3 px-4 text-center font-semibold">Premium</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="py-2 px-4">Skincare Routine Recommender</td>
                  <td class="py-2 px-4 text-center">3 uses/day</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">Unlimited</td>
                </tr>
                <tr class="bg-[#fdf6f0]">
                  <td class="py-2 px-4">Style Matcher (Photo-based)</td>
                  <td class="py-2 px-4 text-center text-gray-400">—</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">✔</td>
                </tr>
                <tr>
                  <td class="py-2 px-4">Look Builder (Makeup AI)</td>
                  <td class="py-2 px-4 text-center text-gray-400">—</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">✔</td>
                </tr>
                <tr class="bg-[#fdf6f0]">
                  <td class="py-2 px-4">Trending Product Finder</td>
                  <td class="py-2 px-4 text-center text-gray-400">—</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">✔</td>
                </tr>
                <tr>
                  <td class="py-2 px-4">Advanced Skincare Routines</td>
                  <td class="py-2 px-4 text-center text-gray-400">—</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">✔</td>
                </tr>
                <tr class="bg-[#fdf6f0]">
                  <td class="py-2 px-4">Personalized Recommendations</td>
                  <td class="py-2 px-4 text-center">Basic</td>
                  <td class="py-2 px-4 text-center text-pop-pink font-bold">Advanced</td>
                </tr>
              </tbody>
            </table>
          </div>
          <!-- Interactive Tool Previews -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            <!-- Free Tool Preview -->
            <div class="glass-card p-6 shadow-lg">
              <h3 class="font-semibold text-lg mb-2 text-deep-black">Skincare Recommender (Free)</h3>
              <div class="mb-4">
                <div class="flex items-center justify-between mb-1">
                  <span class="text-xs text-gray-600">3/3 Free Uses</span>
                  <span class="text-xs text-pop-pink font-semibold">Limit</span>
                </div>
                <div class="w-full bg-soft-beige rounded-full h-2.5">
                  <div class="bg-pop-pink h-2.5 rounded-full" style="width: 100%"></div>
                </div>
              </div>
              <div class="bg-[#fffefc] rounded-lg p-4 mb-3 text-left text-sm">
                <strong>AI Suggestion:</strong> <br>
                <span class="text-gray-700">Gentle Cleanser, Moisturizer, Sunscreen</span>
              </div>
              <button class="btn bg-pop-pink text-white w-full opacity-60 cursor-not-allowed" disabled>Try Now</button>
            </div>
            <!-- Premium Tool Preview -->
            <div class="glass-card p-6 shadow-lg">
              <h3 class="font-semibold text-lg mb-2 text-deep-black">Style Matcher (Premium)</h3>
              <div class="mb-4">
                <div class="flex items-center justify-between mb-1">
                  <span class="text-xs text-gray-600">Unlimited</span>
                  <span class="text-xs text-pop-pink font-semibold">Premium</span>
                </div>
                <div class="w-full bg-soft-beige rounded-full h-2.5">
                  <div class="bg-glossy-brown h-2.5 rounded-full" style="width: 100%"></div>
                </div>
              </div>
              <div class="bg-[#fffefc] rounded-lg p-4 mb-3 text-left text-sm">
                <strong>AI Suggestion:</strong> <br>
                <span class="text-gray-700">Upload a photo to get instant outfit ideas tailored to your style.</span>
              </div>
              <button class="btn bg-pop-pink text-white w-full">Unlock Premium</button>
            </div>
          </div>
          <!-- Pricing Cards -->
          <div class="flex flex-col md:flex-row justify-center gap-8 mb-8">
            <div class="glass-card p-8 flex-1 max-w-md text-center shadow-lg border-2 border-pop-pink">
              <h3 class="text-xl font-bold text-pop-pink mb-2">Premium Glow</h3>
              <div class="text-4xl font-extrabold text-glossy-brown mb-2">$19.99<span class="text-lg font-normal">/mo</span></div>
              <ul class="mb-4 text-left inline-block">
                <li>✔ Unlimited AI tool access</li>
                <li>✔ Advanced recommendations</li>
                <li>✔ Early access to new features</li>
                <li>✔ VIP support</li>
              </ul>
              <button class="btn bg-pop-pink text-white w-full">Unlock Premium</button>
            </div>
            <div class="glass-card p-8 flex-1 max-w-md text-center shadow-lg border-2 border-soft-beige">
              <h3 class="text-xl font-bold text-glossy-brown mb-2">Free Plan</h3>
              <div class="text-4xl font-extrabold text-pop-pink mb-2">$0<span class="text-lg font-normal">/mo</span></div>
              <ul class="mb-4 text-left inline-block">
                <li>✔ 3 skincare recommendations/day</li>
                <li>✔ Basic AI suggestions</li>
                <li>✔ Access to blog & newsletter</li>
              </ul>
              <button class="btn bg-soft-beige text-pop-pink w-full cursor-not-allowed opacity-60" disabled>Current Plan</button>
            </div>
          </div>
          <!-- Mock AI Recommendations -->
          <div class="mt-8 text-center">
            <h3 class="text-lg font-semibold text-glossy-brown mb-2">See What Premium AI Can Do</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
              <div class="glass-card p-6 text-left">
                <div class="font-bold text-pop-pink mb-1">Advanced Skincare Routine</div>
                <ul class="text-sm mb-2">
                  <li>• Double Cleanse</li>
                  <li>• Exfoliating Toner</li>
                  <li>• Peptide Serum</li>
                  <li>• Barrier Repair Cream</li>
                  <li>• SPF 50 Sunscreen</li>
                </ul>
                <span class="text-xs text-gray-500">AI-generated for: Combination, Aging, $100-200</span>
              </div>
              <div class="glass-card p-6 text-left">
                <div class="font-bold text-pop-pink mb-1">Personalized Look Builder</div>
                <ul class="text-sm mb-2">
                  <li>• Dewy Foundation</li>
                  <li>• Soft Pink Blush</li>
                  <li>• Glossy Lip Tint</li>
                  <li>• Brow Definer</li>
                  <li>• Setting Mist</li>
                </ul>
                <span class="text-xs text-gray-500">AI-generated for: Dry, Natural Look, $50-100</span>
              </div>
              <div class="glass-card p-6 text-left">
                <div class="font-bold text-pop-pink mb-1">Trending Product Finder</div>
                <ul class="text-sm mb-2">
                  <li>• Glow Serum</li>
                  <li>• Hydra Face Mask</li>
                  <li>• Luxe Lipstick</li>
                  <li>• Chic Tote Bag</li>
                  <li>• Silk Scrunchies</li>
                </ul>
                <span class="text-xs text-gray-500">AI-generated for: Trending Now</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <style>
    /* Image placeholder shimmer */
    .img-placeholder {
      background: linear-gradient(90deg, #fdf6f0 25%, #f7e6e6 50%, #fdf6f0 75%);
      background-size: 200% 100%;
      animation: shimmer 1.2s infinite linear;
      min-height: 120px;
      min-width: 120px;
      display: block;
    }
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    .img-error {
      background: #ffe6ee url('assets/images/img-error.svg') center/48px no-repeat;
      color: #ff69b4;
      min-height: 120px;
      min-width: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }
    .img-progressive {
      filter: blur(16px) grayscale(0.5);
      transition: filter 0.5s;
    }
    .img-loaded {
      filter: none !important;
    }
    .lightbox-backdrop {
      position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center;
    }
    .lightbox-img {
      max-width: 90vw; max-height: 90vh; border-radius: 1rem; box-shadow: 0 4px 32px #0005;
      background: #fff;
      animation: fade-in 0.3s;
    }
    .lightbox-close {
      position: absolute; top: 2rem; right: 2rem; color: #fff; font-size: 2.5rem; cursor: pointer; z-index: 10000;
      background: rgba(0,0,0,0.2); border-radius: 50%; width: 2.5rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;
    }
      /* Newsletter branding and animation */
      @keyframes sparkle {
        0%,100% { filter: drop-shadow(0 0 0 #ffb6e6); }
        50% { filter: drop-shadow(0 0 8px #ffb6e6); }
      }
      .animate-sparkle { animation: sparkle 1.5s infinite; }
      @keyframes spin-slow { 100% { transform: rotate(360deg); } }
      .animate-spin-slow { animation: spin-slow 3s linear infinite; }
      @keyframes fade-in { from { opacity:0; transform:translateY(20px);} to { opacity:1; transform:none;} }
      .animate-fade-in { animation: fade-in 0.7s cubic-bezier(.77,0,.18,1) both; }
      .btn.bg-pop-pink { transition: box-shadow 0.2s, transform 0.2s; box-shadow:0 2px 8px #ffb6e633; }
      .btn.bg-pop-pink:active { transform: scale(0.97) rotate(-1deg); box-shadow:0 1px 4px #ffb6e633; }
      #newsletter-confetti { pointer-events:none; position:absolute; left:0; top:0; width:100%; height:100%; z-index:50; }
        /* Floating animation keyframes */
        @keyframes float {
          0% {
            transform: translateY(0) scale(1);
          }
          50% {
            transform: translateY(-20px) scale(1.05);
          }
          100% {
            transform: translateY(0) scale(1);
          }
        }
        @keyframes float-slow {
          0% {
            transform: translateY(0) scale(1);
          }
          50% {
            transform: translateY(-30px) scale(1.08);
          }
          100% {
            transform: translateY(0) scale(1);
          }
        }
        @keyframes float-fast {
          0% {
            transform: translateY(0) scale(1);
          }
          50% {
            transform: translateY(-10px) scale(1.03);
          }
          100% {
            transform: translateY(0) scale(1);
          }
        }
        .animate-float {
          animation: float 5s ease-in-out infinite;
        }
        .animate-float-slow {
          animation: float-slow 8s ease-in-out infinite;
        }
        .animate-float-fast {
          animation: float-fast 3s ease-in-out infinite;
        }
      </style>
    </main>
    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-black/40 z-[200] flex items-center justify-center hidden">
      <div class="bg-white dark:bg-[#232323] rounded-2xl shadow-2xl max-w-lg w-full p-0 relative animate-fade-in">
        <button id="settings-close" class="absolute top-3 right-3 text-pop-pink text-2xl font-bold">&times;</button>
        <h2 class="text-xl font-bold mb-4 text-glossy-brown dark:text-cream-white px-6 pt-6">Settings</h2>
        <form id="settings-form" class="flex flex-col gap-5 px-6 pb-2 overflow-y-auto" style="max-height:60vh;">
          <div>
            <label class="font-semibold block mb-1">Theme</label>
            <select id="settings-theme" class="w-full rounded border p-2">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
              <option value="system">System</option>
            </select>
          </div>
          <div>
            <label class="font-semibold block mb-1">Language</label>
            <select id="settings-lang" class="w-full rounded border p-2">
              <option value="en">English</option>
              <option value="ar">العربية</option>
              <option value="fr">Français</option>
            </select>
          </div>
          <div>
            <label class="font-semibold block mb-1">Notifications</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="settings-notify-news" /> News & Offers</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="settings-notify-tips" /> Beauty Tips</label>
          </div>
          <div>
            <label class="font-semibold block mb-1">Privacy</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="settings-privacy-analytics" /> Allow Analytics</label>
            <label class="flex items-center gap-2"><input type="checkbox" id="settings-privacy-personalized" /> Personalized Recommendations</label>
          </div>
          <div>
            <label class="font-semibold block mb-1">Account Preferences</label>
            <input type="text" id="settings-name" class="w-full rounded border p-2 mb-2" placeholder="Name (optional)" />
            <input type="email" id="settings-email" class="w-full rounded border p-2" placeholder="Email (optional)" />
          </div>
        </form>
        <div class="sticky bottom-0 left-0 w-full bg-white dark:bg-[#232323] px-6 pb-6 pt-2 z-10 flex flex-col gap-2 shadow-[0_-2px_12px_#0001]">
          <div class="flex gap-2">
            <button type="button" id="settings-export" class="btn bg-soft-beige text-pop-pink flex-1">Export</button>
            <label class="btn bg-soft-beige text-pop-pink flex-1 cursor-pointer">
              Import <input type="file" id="settings-import" accept="application/json" class="hidden" />
            </label>
          </div>
          <div class="flex gap-2 mt-2">
            <button type="submit" form="settings-form" class="btn bg-pop-pink text-white flex-1">Save</button>
            <button type="button" id="settings-reset" class="btn bg-soft-beige text-pop-pink flex-1">Reset</button>
          </div>
          <div id="settings-message" class="text-center text-pop-pink mt-2 text-sm"></div>
        </div>
      </div>
    </div>
    <style>
      .dark {
        background: #232323 !important;
        color: #fdf6f0 !important;
      }
      .dark .glass-card, .dark .bg-white, .dark .bg-cream-white, .dark .bg-soft-beige {
        background: #232323 !important;
        color: #fdf6f0 !important;
      }
      .dark .text-deep-black, .dark .text-glossy-brown {
        color: #fdf6f0 !important;
      }
      .dark .btn.bg-pop-pink {
        background: #ff69b4 !important;
        color: #fff !important;
      }
      .dark input, .dark select {
        background: #232323 !important;
        color: #fdf6f0 !important;
        border-color: #b47b5b !important;
      }
    </style>
    <!-- Wishlist Modal/Page -->
    <div id="wishlist-modal" class="fixed inset-0 bg-black bg-opacity-40 z-[200] flex items-center justify-center hidden">
      <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6 relative animate-fade-in">
        <button id="wishlist-close" class="absolute top-3 right-3 text-pop-pink text-2xl font-bold">&times;</button>
        <h2 class="text-xl font-bold mb-4 text-glossy-brown">My Wishlist</h2>
        <div id="wishlist-items" class="mb-4"></div>
        <div class="flex flex-wrap gap-2 mb-2">
          <button id="wishlist-share" class="btn bg-pop-pink text-white">Share Wishlist</button>
          <button id="wishlist-clear" class="btn bg-soft-beige text-pop-pink">Clear Wishlist</button>
        </div>
        <div id="wishlist-empty" class="text-pop-pink text-center hidden">Your wishlist is empty.</div>
      </div>
    </div>
    <!-- Recently Viewed Modal -->
    <div id="recently-viewed-modal" class="fixed inset-0 bg-black bg-opacity-40 z-[200] flex items-center justify-center hidden">
      <div class="bg-white rounded-2xl shadow-2xl max-w-xl w-full p-6 relative animate-fade-in">
        <button id="recently-viewed-close" class="absolute top-3 right-3 text-pop-pink text-2xl font-bold">&times;</button>
        <h2 class="text-xl font-bold mb-4 text-glossy-brown">Recently Viewed</h2>
        <div id="recently-viewed-items"></div>
      </div>
    </div>
    <style>
      .wishlist-heart {
        cursor: pointer;
        transition: color 0.2s;
      }
      .wishlist-heart.active {
        color: #ff69b4;
        fill: #ff69b4;
      }
      #wishlist-counter {
        min-width: 1.25rem;
        min-height: 1.25rem;
        line-height: 1.25rem;
        text-align: center;
        font-size: 0.85rem;
        pointer-events: none;
      }
    </style>
    <!-- Reusable Carousel Component Styles -->
    <style>
      .carousel {
        position: relative;
        width: 100%;
        overflow: hidden;
      }
      .carousel-track {
        display: flex;
        transition: transform 0.5s cubic-bezier(.77,0,.18,1);
        will-change: transform;
      }
      .carousel-slide {
        min-width: 100%;
        box-sizing: border-box;
        flex-shrink: 0;
      }
      .carousel-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255,255,255,0.8);
        border: none;
        border-radius: 50%;
        width: 2.5rem;
        height: 2.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: #ff69b4;
        cursor: pointer;
        z-index: 2;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        transition: background 0.2s;
      }
      .carousel-arrow:hover {
        background: #ff69b4;
        color: #fff;
      }
      .carousel-arrow.left { left: 0.5rem; }
      .carousel-arrow.right { right: 0.5rem; }
      .carousel-dots {
        position: absolute;
        left: 50%;
        bottom: 1rem;
        transform: translateX(-50%);
        display: flex;
        gap: 0.5rem;
        z-index: 2;
      }
      .carousel-dot {
        width: 0.75rem;
        height: 0.75rem;
        border-radius: 50%;
        background: #fdf6f0;
        border: 2px solid #ff69b4;
        cursor: pointer;
        transition: background 0.2s, border 0.2s;
      }
      .carousel-dot.active {
        background: #ff69b4;
        border-color: #ff69b4;
      }
      @media (max-width: 768px) {
        .carousel-slide { min-width: 100vw; }
      }
    </style>
    <!-- Reusable Modal Component -->
    <div id="modal-overlay" tabindex="-1" aria-modal="true" role="dialog" class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/40 backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none" style="display:none;">
      <div id="modal-container" class="relative bg-white rounded-2xl shadow-2xl max-h-[90vh] overflow-auto scale-95 opacity-0 transition-all duration-300 min-w-[320px]" style="outline:0;">
        <button id="modal-close" aria-label="Close modal" class="absolute top-3 right-3 text-2xl text-pop-pink hover:text-glossy-brown focus:outline-none focus:ring-2 focus:ring-pop-pink rounded-full w-10 h-10 flex items-center justify-center bg-white/80 shadow-md z-10">&times;</button>
        <div id="modal-slot" class="p-6"></div>
      </div>
    </div>
    <!-- Customer Testimonials Section (Carousel) -->
    <section class="relative py-16 px-4 bg-cream-white overflow-hidden">
      <div class="absolute inset-0 pointer-events-none opacity-10 z-0" aria-hidden="true"
        style="background-image: url('assets/images/pattern-leaves.svg'), url('assets/images/pattern-dots.svg'); background-repeat: repeat, repeat; background-size: 320px, 120px;"></div>
      <div class="container relative z-10">
        <div class="flex flex-col md:flex-row items-center justify-between mb-10 gap-6">
          <div class="flex items-center gap-4">
            <img class="w-10 h-10" />
            <span class="font-semibold text-glossy-brown text-lg">Trusted by 10,000+ Glow Getters</span>
          </div>
          <div class="flex items-center gap-4">
            <span class="flex text-yellow-400 text-2xl">★★★★★</span>
            <span class="text-gray-700 font-medium">4.9/5.0 (2,134 reviews)</span>
          </div>
          <div class="flex items-center gap-4">
            <img class="w-10 h-10" />
            <span class="font-semibold text-glossy-brown text-lg">GDPR Compliant</span>
          </div>
        </div>
        <!-- Carousel for Testimonials -->
        <div class="carousel" id="testimonials-carousel">
          <div class="carousel-track">
            <div class="carousel-slide">
              <div class="glass-card p-8 flex flex-col items-center text-center shadow-lg">
                <img class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-pop-pink" src="assets/images/testimonial1.jpg" alt="Testimonial 1" />
                <h4 class="font-semibold text-lg text-deep-black mb-1">Ava L.</h4>
                <div class="flex text-yellow-400 mb-2">★★★★★</div>
                <blockquote class="italic text-gray-700 mb-2">“LetMeGlowUp totally changed my skincare game. The AI recommendations are spot on!”</blockquote>
              </div>
            </div>
            <div class="carousel-slide">
              <div class="glass-card p-8 flex flex-col items-center text-center shadow-lg">
                <img class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-glossy-brown" src="assets/images/testimonial2.jpg" alt="Testimonial 2" />
                <h4 class="font-semibold text-lg text-deep-black mb-1">Maya S.</h4>
                <div class="flex text-yellow-400 mb-2">★★★★★</div>
                <blockquote class="italic text-gray-700 mb-2">“I love the personalized routines and the product picks. So easy and fun!”</blockquote>
              </div>
            </div>
            <div class="carousel-slide">
              <div class="glass-card p-8 flex flex-col items-center text-center shadow-lg">
                <img class="w-20 h-20 rounded-full mb-4 object-cover border-4 border-pop-pink" src="assets/images/testimonial3.jpg" alt="Testimonial 3" />
                <h4 class="font-semibold text-lg text-deep-black mb-1">Sara K.</h4>
                <div class="flex text-yellow-400 mb-2">★★★★★</div>
                <blockquote class="italic text-gray-700 mb-2">“The quiz and AI tools are so smart. I finally found what works for me!”</blockquote>
              </div>
            </div>
          </div>
          <button class="carousel-arrow left" aria-label="Previous testimonial">&#8592;</button>
          <button class="carousel-arrow right" aria-label="Next testimonial">&#8594;</button>
          <div class="carousel-dots"></div>
        </div>
      </div>
    </section>
    <!-- Before/After Transformations Carousel Example -->
    <section class="py-16 px-4 bg-soft-beige">
      <div class="container">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-glossy-brown">Before & After Transformations</h2>
        <div class="carousel" id="beforeafter-carousel">
          <div class="carousel-track">
            <div class="carousel-slide">
              <div class="flex flex-col md:flex-row items-center gap-8">
                <img src="assets/images/before1.jpg" alt="Before" class="rounded-xl shadow-md w-full md:w-1/2" />
                <img src="assets/images/after1.jpg" alt="After" class="rounded-xl shadow-md w-full md:w-1/2" />
              </div>
              <div class="text-center mt-4 text-pop-pink font-semibold">Glowing Skin in 4 Weeks</div>
            </div>
            <div class="carousel-slide">
              <div class="flex flex-col md:flex-row items-center gap-8">
                <img src="assets/images/before2.jpg" alt="Before" class="rounded-xl shadow-md w-full md:w-1/2" />
                <img src="assets/images/after2.jpg" alt="After" class="rounded-xl shadow-md w-full md:w-1/2" />
              </div>
              <div class="text-center mt-4 text-pop-pink font-semibold">Clearer Complexion</div>
            </div>
            <div class="carousel-slide">
              <div class="flex flex-col md:flex-row items-center gap-8">
                <img src="assets/images/before3.jpg" alt="Before" class="rounded-xl shadow-md w-full md:w-1/2" />
                <img src="assets/images/after3.jpg" alt="After" class="rounded-xl shadow-md w-full md:w-1/2" />
              </div>
              <div class="text-center mt-4 text-pop-pink font-semibold">Fashion Makeover</div>
            </div>
          </div>
          <button class="carousel-arrow left" aria-label="Previous transformation">&#8592;</button>
          <button class="carousel-arrow right" aria-label="Next transformation">&#8594;</button>
          <div class="carousel-dots"></div>
        </div>
      </div>
    </section>
    <!-- Product Showcase Carousel Example (Mobile Only) -->
    <section class="block md:hidden py-16 px-4 bg-cream-white">
      <div class="container">
        <h2 class="text-3xl font-bold text-center mb-8 text-glossy-brown">Shop Highlights</h2>
        <div class="carousel" id="products-carousel">
          <div class="carousel-track">
            <div class="carousel-slide">
              <div class="product-card group relative overflow-hidden transition hover-glow hover:scale-105" data-category="skincare">
                <div class="relative">
                  <img src="assets/images/product4.jpg" alt="Hydra Face Mask" class="w-full h-56 object-cover rounded-t-lg" />
                  <span class="product-badge bg-pop-pink">SAVE 25%</span>
                </div>
                <div class="p-4">
                  <h3 class="font-semibold text-deep-black text-lg mb-1">Hydra Face Mask</h3>
                  <div class="flex items-center mt-1 mb-2">
                    <span class="text-pop-pink font-bold text-lg">$18.75</span>
                    <span class="text-gray-500 line-through ml-2">$25.00</span>
                  </div>
                  <div class="flex items-center mb-2">
                    <div class="flex text-yellow-400 text-base">★★★★☆</div>
                    <span class="text-sm text-gray-600 ml-2">(39 reviews)</span>
                  </div>
                  <div class="flex gap-2 mt-4">
                    <button class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1">Add to Wishlist</button>
                    <a>View Details</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-slide">
              <div class="product-card group relative overflow-hidden transition hover-glow hover:scale-105" data-category="makeup">
                <div class="relative">
                  <img src="assets/images/product2.jpg" alt="Luxe Lipstick" class="w-full h-56 object-cover rounded-t-lg" />
                  <span class="product-badge bg-pop-pink">SAVE 15%</span>
                </div>
                <div class="p-4">
                  <h3 class="font-semibold text-deep-black text-lg mb-1">Luxe Lipstick</h3>
                  <div class="flex items-center mt-1 mb-2">
                    <span class="text-pop-pink font-bold text-lg">$21.25</span>
                    <span class="text-gray-500 line-through ml-2">$25.00</span>
                  </div>
                  <div class="flex items-center mb-2">
                    <div class="flex text-yellow-400 text-base">★★★★★</div>
                    <span class="text-sm text-gray-600 ml-2">(52 reviews)</span>
                  </div>
                  <div class="flex gap-2 mt-4">
                    <button class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1">Add to Wishlist</button>
                    <a>View Details</a>
                  </div>
                </div>
              </div>
            </div>
            <div class="carousel-slide">
              <div class="product-card group relative overflow-hidden transition hover-glow hover:scale-105" data-category="fashion">
                <div class="relative">
                  <img src="assets/images/product3.jpg" alt="Chic Tote Bag" class="w-full h-56 object-cover rounded-t-lg" />
                  <span class="product-badge bg-pop-pink">SAVE 10%</span>
                </div>
                <div class="p-4">
                  <h3 class="font-semibold text-deep-black text-lg mb-1">Chic Tote Bag</h3>
                  <div class="flex items-center mt-1 mb-2">
                    <span class="text-pop-pink font-bold text-lg">$27.00</span>
                    <span class="text-gray-500 line-through ml-2">$30.00</span>
                  </div>
                  <div class="flex items-center mb-2">
                    <div class="flex text-yellow-400 text-base">★★★★☆</div>
                    <span class="text-sm text-gray-600 ml-2">(18 reviews)</span>
                  </div>
                  <div class="flex gap-2 mt-4">
                    <button class="btn bg-cream-white text-pop-pink border border-pop-pink px-4 py-1 rounded-full font-semibold transition hover:bg-pop-pink hover:text-white text-sm flex-1">Add to Wishlist</button>
                    <a>View Details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="carousel-arrow left" aria-label="Previous product">&#8592;</button>
          <button class="carousel-arrow right" aria-label="Next product">&#8594;</button>
          <div class="carousel-dots"></div>
        </div>
      </div>
    </section>
    <!-- Carousel Component Script -->
    <!-- Contact Form Section -->
    <section class="py-16 px-4 bg-cream-white">
      <div class="container max-w-lg mx-auto">
        <div class="glass-card p-8 shadow-lg" data-aos="fade-up">
          <h2 class="text-2xl md:text-3xl font-bold mb-4 text-glossy-brown text-center">Contact Us</h2>
          <form id="contact-form" class="flex flex-col gap-5" novalidate aria-label="Contact form">
            <div>
              <label for="contact-name" class="block font-semibold mb-1 text-deep-black">Name</label>
              <input type="text" id="contact-name" name="name" required aria-required="true" autocomplete="name" class="w-full px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black" aria-invalid="false" aria-describedby="contact-name-error" />
              <span id="contact-name-error" class="text-pop-pink text-sm mt-1 block" role="alert" aria-live="polite"></span>
            </div>
            <div>
              <label for="contact-email" class="block font-semibold mb-1 text-deep-black">Email</label>
              <input type="email" id="contact-email" name="email" required aria-required="true" autocomplete="email" class="w-full px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black" aria-invalid="false" aria-describedby="contact-email-error" />
              <span id="contact-email-error" class="text-pop-pink text-sm mt-1 block" role="alert" aria-live="polite"></span>
            </div>
            <div>
              <label for="contact-subject" class="block font-semibold mb-1 text-deep-black">Subject</label>
              <input type="text" id="contact-subject" name="subject" required aria-required="true" class="w-full px-4 py-2 rounded-full border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black" aria-invalid="false" aria-describedby="contact-subject-error" />
              <span id="contact-subject-error" class="text-pop-pink text-sm mt-1 block" role="alert" aria-live="polite"></span>
            </div>
            <div>
              <label for="contact-message" class="block font-semibold mb-1 text-deep-black">Message</label>
              <textarea id="contact-message" name="message" required aria-required="true" rows="5" class="w-full px-4 py-2 rounded-2xl border border-soft-beige focus:ring-2 focus:ring-pop-pink focus:outline-none text-deep-black resize-none" aria-invalid="false" aria-describedby="contact-message-error"></textarea>
              <span id="contact-message-error" class="text-pop-pink text-sm mt-1 block" role="alert" aria-live="polite"></span>
            </div>
            <!-- Honeypot for spam protection -->
            <div style="display:none;">
              <label for="contact-beauty-code">Beauty Code</label>
              <input type="text" id="contact-beauty-code" name="beauty_code" tabindex="-1" autocomplete="off" />
            </div>
            <button type="submit" id="contact-submit" class="btn bg-pop-pink text-white w-full flex items-center justify-center gap-2" aria-busy="false">
              <span id="contact-submit-text">Send Message</span>
              <span id="contact-spinner" class="hidden animate-spin ml-2 w-5 h-5 border-2 border-white border-t-transparent rounded-full"></span>
            </button>
            <div id="contact-form-message" class="w-full text-center text-sm mt-2" aria-live="polite"></div>
          </form>
        </div>
      </div>
    </section>
    <script>
    // Contact Form Validation & Submission
    (function(){
      const form = document.getElementById('contact-form');
      if (!form) return;
      const fields = {
        name: form.querySelector('#contact-name'),
        email: form.querySelector('#contact-email'),
        subject: form.querySelector('#contact-subject'),
        message: form.querySelector('#contact-message'),
        beauty_code: form.querySelector('#contact-beauty-code')
      };
      const errors = {
        name: form.querySelector('#contact-name-error'),
        email: form.querySelector('#contact-email-error'),
        subject: form.querySelector('#contact-subject-error'),
        message: form.querySelector('#contact-message-error')
      };
      const submitBtn = form.querySelector('#contact-submit');
      const submitText = form.querySelector('#contact-submit-text');
      const spinner = form.querySelector('#contact-spinner');
      const msgBox = form.querySelector('#contact-form-message');

      // Custom beauty industry validation rules
      function validateName(val) {
        if (!val.trim()) return 'Name is required.';
        if (!/^[A-Za-z\s\-']{2,40}$/.test(val)) return 'Please enter a valid name.';
        if (/bot|test|admin/i.test(val)) return 'Name cannot contain forbidden words.';
        return '';
      }
      function validateEmail(val) {
        if (!val.trim()) return 'Email is required.';
        if (!/^([\w\-.]+)@([\w-]+)\.([a-zA-Z]{2,})$/.test(val)) return 'Please enter a valid email address.';
        if (/beauty\d{4,}/i.test(val)) return 'Please use a real email, not a fake one.';
        return '';
      }
      function validateSubject(val) {
        if (!val.trim()) return 'Subject is required.';
        if (val.length < 5) return 'Subject must be at least 5 characters.';
        if (/free\s*gift|win\s*prize|discount|promo/i.test(val)) return 'Please avoid promotional language.';
        return '';
      }
      function validateMessage(val) {
        if (!val.trim()) return 'Message is required.';
        if (val.length < 20) return 'Message must be at least 20 characters.';
        if (/http[s]?:\/\//i.test(val)) return 'No links allowed in message.';
        if (/buy now|cheap|guaranteed results|miracle/i.test(val)) return 'Please avoid spammy phrases.';
        return '';
      }

      function setError(field, error) {
        errors[field].textContent = error;
        fields[field].setAttribute('aria-invalid', !!error);
      }

      function validateField(field) {
        let val = fields[field].value;
        let error = '';
        if (field === 'name') error = validateName(val);
        if (field === 'email') error = validateEmail(val);
        if (field === 'subject') error = validateSubject(val);
        if (field === 'message') error = validateMessage(val);
        setError(field, error);
        return !error;
      }

      // Real-time validation
      Object.keys(fields).forEach(f => {
        if (f === 'beauty_code') return;
        fields[f].addEventListener('input', () => validateField(f));
        fields[f].addEventListener('blur', () => validateField(f));
      });

      // Spam protection: honeypot and basic timing
      let formStart = Date.now();

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        msgBox.textContent = '';
        let valid = true;
        Object.keys(errors).forEach(f => {
          if (!validateField(f)) valid = false;
        });
        // Honeypot
        if (fields.beauty_code.value) {
          msgBox.textContent = 'Spam detected.';
          msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
          return;
        }
        // Timing: must spend at least 3 seconds
        if (Date.now() - formStart < 3000) {
          msgBox.textContent = 'Please take a moment to fill out the form.';
          msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
          return;
        }
        if (!valid) return;
        // Loading state
        submitBtn.setAttribute('aria-busy', 'true');
        submitBtn.disabled = true;
        spinner.classList.remove('hidden');
        submitText.textContent = 'Sending...';

        // Simulate async submission (replace with real endpoint as needed)
        setTimeout(() => {
          // Simulate random error
          if (Math.random() < 0.1) {
            msgBox.textContent = 'Something went wrong. Please try again.';
            msgBox.className = 'w-full text-center text-pop-pink text-sm mt-2';
          } else {
            msgBox.textContent = 'Thank you for contacting us! We will get back to you soon.';
            msgBox.className = 'w-full text-center text-glossy-brown text-sm mt-2';
            form.reset();
          }
          submitBtn.setAttribute('aria-busy', 'false');
          submitBtn.disabled = false;
          spinner.classList.add('hidden');
          submitText.textContent = 'Send Message';
          formStart = Date.now();
        }, 1800);
      });
    })();
    </script>
    <script>
    // Reusable Carousel Utility
    (function(){
      function Carousel(root, opts={}) {
        this.root = root;
        this.track = root.querySelector('.carousel-track');
        this.slides = Array.from(this.track.children);
        this.dots = root.querySelector('.carousel-dots');
        this.left = root.querySelector('.carousel-arrow.left');
        this.right = root.querySelector('.carousel-arrow.right');
        this.index = 0;
        this.timer = null;
        this.paused = false;
        this.opts = Object.assign({
          autoPlay: true,
          interval: 3500,
          pauseOnHover: true,
          infinite: true,
          swipe: true,
          breakpoints: {
            0: 1,
            640: 1,
            768: 1,
            1024: 1
          }
        }, opts);
        this.slideCount = this.slides.length;
        this.visibleSlides = 1;
        this.setup();
      }
      Carousel.prototype.setup = function() {
        this.updateResponsive();
        this.createDots();
        this.goTo(0, true);
        this.attachEvents();
        if (this.opts.autoPlay) this.startAutoPlay();
      };
      Carousel.prototype.updateResponsive = function() {
        const w = window.innerWidth;
        let slidesToShow = 1;
        for (const bp in this.opts.breakpoints) {
          if (w >= bp) slidesToShow = this.opts.breakpoints[bp];
        }
        this.visibleSlides = slidesToShow;
        this.track.style.transform = `translateX(-${this.index * (100/this.visibleSlides)}%)`;
        this.slides.forEach(slide => slide.style.minWidth = (100/this.visibleSlides)+'%');
      };
      Carousel.prototype.createDots = function() {
        this.dots.innerHTML = '';
        for (let i=0; i<this.slideCount; i++) {
          const dot = document.createElement('button');
          dot.className = 'carousel-dot' + (i===this.index?' active':'');
          dot.setAttribute('aria-label', 'Go to slide '+(i+1));
          dot.onclick = ()=>this.goTo(i);
          this.dots.appendChild(dot);
        }
      };
      Carousel.prototype.updateDots = function() {
        Array.from(this.dots.children).forEach((dot,i)=>{
          dot.classList.toggle('active', i===this.index);
        });
      };
      Carousel.prototype.goTo = function(idx, instant) {
        if (this.opts.infinite) {
          if (idx < 0) idx = this.slideCount-1;
          if (idx >= this.slideCount) idx = 0;
        } else {
          idx = Math.max(0, Math.min(idx, this.slideCount-1));
        }
        this.index = idx;
        this.track.style.transition = instant?'none':'transform 0.5s cubic-bezier(.77,0,.18,1)';
        this.track.style.transform = `translateX(-${idx * (100/this.visibleSlides)}%)`;
        this.updateDots();
      };
      Carousel.prototype.next = function() { this.goTo(this.index+1); };
      Carousel.prototype.prev = function() { this.goTo(this.index-1); };
      Carousel.prototype.startAutoPlay = function() {
        if (this.timer) clearInterval(this.timer);
        this.timer = setInterval(()=>{
          if (!this.paused) this.next();
        }, this.opts.interval);
      };
      Carousel.prototype.attachEvents = function() {
        this.right.onclick = ()=>this.next();
        this.left.onclick = ()=>this.prev();
        if (this.opts.pauseOnHover) {
          this.root.addEventListener('mouseenter', ()=>{this.paused=true;});
          this.root.addEventListener('mouseleave', ()=>{this.paused=false;});
        }
        if (this.opts.swipe) {
          let startX=0, dx=0, dragging=false;
          this.track.addEventListener('touchstart', e=>{
            dragging=true; startX=e.touches[0].clientX; dx=0;
          });
          this.track.addEventListener('touchmove', e=>{
            if (!dragging) return;
            dx = e.touches[0].clientX - startX;
          });
          this.track.addEventListener('touchend', ()=>{
            if (Math.abs(dx)>40) {
              if (dx<0) this.next(); else this.prev();
            }
            dragging=false; dx=0;
          });
        }
        window.addEventListener('resize', ()=>this.updateResponsive());
      };
      // Init all carousels on DOMContentLoaded
      document.addEventListener('DOMContentLoaded', function(){
        // Testimonials
        const t = document.getElementById('testimonials-carousel');
        if (t) new Carousel(t, {
          autoPlay: true,
          interval: 4000,
          infinite: true,
          pauseOnHover: true,
          swipe: true,
          breakpoints: {0:1,640:1,1024:1}
        });
        // Before/After
        const b = document.getElementById('beforeafter-carousel');
        if (b) new Carousel(b, {
          autoPlay: true,
          interval: 5000,
          infinite: true,
          pauseOnHover: true,
          swipe: true,
          breakpoints: {0:1,640:1,1024:1}
        });
        // Product showcase (mobile only)
        const p = document.getElementById('products-carousel');
        if (p) new Carousel(p, {
          autoPlay: true,
          interval: 3500,
          infinite: true,
          pauseOnHover: true,
          swipe: true,
          breakpoints: {0:1,640:1,1024:1}
        });
      });
    })();
    </script>
    <!-- AOS Animation Script -->
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init();
      // Mobile nav toggle
      const navToggle = document.getElementById("nav-toggle");
      const mobileMenu = document.getElementById("mobile-menu");
      navToggle.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    </script>
    <!-- Custom JS -->
    <script src="assets/js/main.js"></script>
    <script>
    // --- Image Handling: Lazy, WebP, Responsive, Placeholders, Error, Progressive, Lightbox ---
    (function(){
      // Helper: create <picture> with WebP, fallback, srcset, placeholder
      function createResponsivePicture({src, alt, width, height, sizes, webp, placeholder, className, gallery}) {
        const pic = document.createElement('picture');
        if (webp) {
          const srcsetWebp = Array.isArray(webp) ? webp.map(w=>`${w.src} ${w.w}`).join(',') : '';
          const sourceWebp = document.createElement('source');
          sourceWebp.type = 'image/webp';
          sourceWebp.srcset = srcsetWebp || webp;
          if (sizes) sourceWebp.sizes = sizes;
          pic.appendChild(sourceWebp);
        }
        if (src && Array.isArray(src)) {
          const srcset = src.map(s=>`${s.src} ${s.w}`).join(',');
          const source = document.createElement('source');
          source.srcset = srcset;
          if (sizes) source.sizes = sizes;
          pic.appendChild(source);
        }
        const img = document.createElement('img');
        img.alt = alt||'';
        img.width = width||'';
        img.height = height||'';
        img.className = (className||'') + ' img-progressive';
        img.loading = 'lazy';
        img.decoding = 'async';
        if (src && !Array.isArray(src)) img.src = src;
        if (src && Array.isArray(src)) img.src = src[0].src;
        if (placeholder) img.style.background = `url('${placeholder}') center/cover no-repeat`;
        img.onerror = function(){ img.className += ' img-error'; img.src=''; img.alt='Image failed to load'; };
        img.onload = function(){ img.classList.add('img-loaded'); };
        // Progressive loading: swap low-res for hi-res
        if (placeholder) {
          img.src = placeholder;
          const hiRes = (src && Array.isArray(src)) ? src[src.length-1].src : src;
          const hiResImg = new window.Image();
          hiResImg.src = hiRes;
          hiResImg.onload = function(){ img.src = hiRes; };
        }
        pic.appendChild(img);
        if (gallery) {
          img.classList.add('lightbox-trigger');
          img.setAttribute('data-gallery', gallery);
          img.setAttribute('tabindex', '0');
        }
        return pic;
      }

      // Lightbox gallery
      function openLightbox(src, alt) {
        let backdrop = document.createElement('div');
        backdrop.className = 'lightbox-backdrop';
        let img = document.createElement('img');
        img.className = 'lightbox-img';
        img.src = src;
        img.alt = alt||'';
        let close = document.createElement('span');
        close.className = 'lightbox-close';
        close.innerHTML = '&times;';
        close.onclick = ()=>document.body.removeChild(backdrop);
        backdrop.onclick = e=>{ if(e.target===backdrop)document.body.removeChild(backdrop); };
        backdrop.appendChild(img);
        backdrop.appendChild(close);
        document.body.appendChild(backdrop);
        img.focus();
      }
      document.body.addEventListener('click', function(e){
        const t = e.target.closest('.lightbox-trigger');
        if (t) openLightbox(t.src, t.alt);
      });
      document.body.addEventListener('keydown', function(e){
        if (e.key==='Escape') {
          const lb = document.querySelector('.lightbox-backdrop');
          if (lb) lb.remove();
        }
      });

      // Enhance all <img> for lazy, error, progressive, lightbox, responsive
      function enhanceImages() {
        document.querySelectorAll('img[data-enhance]:not([data-enhanced])').forEach(img => {
          const src = img.getAttribute('data-src') || img.src;
          const alt = img.alt;
          const width = img.width;
          const height = img.height;
          const sizes = img.getAttribute('data-sizes');
          const webp = img.getAttribute('data-webp');
          const placeholder = img.getAttribute('data-placeholder');
          const gallery = img.getAttribute('data-gallery');
          const pic = createResponsivePicture({src, alt, width, height, sizes, webp, placeholder, className: img.className, gallery});
          img.replaceWith(pic);
          pic.querySelector('img').setAttribute('data-enhanced','1');
        });
      }
      // Auto-enhance specific sections on DOMContentLoaded
      document.addEventListener('DOMContentLoaded', function() {
        // Add data-enhance and gallery to testimonial images
        document.querySelectorAll('.testimonials-carousel img, #testimonials-carousel img').forEach(img => {
          img.setAttribute('data-enhance','1');
          img.setAttribute('data-gallery','testimonials');
          img.setAttribute('data-placeholder', 'assets/images/placeholder-blur.jpg');
          img.setAttribute('loading','lazy');
        });
        // Add data-enhance and gallery to before/after images
        document.querySelectorAll('#beforeafter-carousel img').forEach(img => {
          img.setAttribute('data-enhance','1');
          img.setAttribute('data-gallery','beforeafter');
          img.setAttribute('data-placeholder', 'assets/images/placeholder-blur.jpg');
          img.setAttribute('loading','lazy');
        });
        // Add data-enhance and gallery to product images
        document.querySelectorAll('.product-card img').forEach(img => {
          img.setAttribute('data-enhance','1');
          img.setAttribute('data-gallery','products');
          img.setAttribute('data-placeholder', 'assets/images/placeholder-blur.jpg');
          img.setAttribute('loading','lazy');
        });
        enhanceImages();
      });
      window.enhanceImages = enhanceImages;
    })();
    // --- Image Compression Utility (client-side demo) ---
    window.compressImage = async function(file, {maxW=1200, maxH=1200, quality=0.7, type='image/webp'}={}) {
      return new Promise((resolve, reject) => {
        const img = new window.Image();
        img.onload = function() {
          let w = img.width, h = img.height;
          if (w > maxW) { h = h * maxW / w; w = maxW; }
          if (h > maxH) { w = w * maxH / h; h = maxH; }
          const canvas = document.createElement('canvas');
          canvas.width = w; canvas.height = h;
          canvas.getContext('2d').drawImage(img,0,0,w,h);
          canvas.toBlob(blob => resolve(blob), type, quality);
        };
        img.onerror = reject;
        img.src = URL.createObjectURL(file);
      });
    };
    </script>
    <script>
    // --- Settings Management ---
    (function(){
      const SETTINGS_KEY = 'letmeglowup_settings';
      const settingsBtn = document.getElementById('settings-btn');
      const settingsModal = document.getElementById('settings-modal');
      const settingsClose = document.getElementById('settings-close');
      const settingsForm = document.getElementById('settings-form');
      const settingsTheme = document.getElementById('settings-theme');
      const settingsLang = document.getElementById('settings-lang');
      const settingsNotifyNews = document.getElementById('settings-notify-news');
      const settingsNotifyTips = document.getElementById('settings-notify-tips');
      const settingsPrivacyAnalytics = document.getElementById('settings-privacy-analytics');
      const settingsPrivacyPersonalized = document.getElementById('settings-privacy-personalized');
      const settingsName = document.getElementById('settings-name');
      const settingsEmail = document.getElementById('settings-email');
      const settingsExport = document.getElementById('settings-export');
      const settingsImport = document.getElementById('settings-import');
      const settingsReset = document.getElementById('settings-reset');
      const settingsMsg = document.getElementById('settings-message');

      function getSettings() {
        return JSON.parse(localStorage.getItem(SETTINGS_KEY)||'{}');
      }
      function setSettings(obj) {
        localStorage.setItem(SETTINGS_KEY, JSON.stringify(obj));
      }
      function applyTheme(theme) {
        if (theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      }
      function applySettings() {
        const s = getSettings();
        settingsTheme.value = s.theme || 'light';
        settingsLang.value = s.lang || 'en';
        settingsNotifyNews.checked = !!s.notifyNews;
        settingsNotifyTips.checked = !!s.notifyTips;
        settingsPrivacyAnalytics.checked = !!s.privacyAnalytics;
        settingsPrivacyPersonalized.checked = !!s.privacyPersonalized;
        settingsName.value = s.name || '';
        settingsEmail.value = s.email || '';
        applyTheme(s.theme || 'light');
        // Set language preference globally
        if (window.langSwitcher) {
          window.langSwitcher.value = s.lang || 'en';
        }
        localStorage.setItem('lang', s.lang || 'en');
      }
      function saveSettings(e) {
        if (e) e.preventDefault();
        const s = {
          theme: settingsTheme.value,
          lang: settingsLang.value,
          notifyNews: settingsNotifyNews.checked,
          notifyTips: settingsNotifyTips.checked,
          privacyAnalytics: settingsPrivacyAnalytics.checked,
          privacyPersonalized: settingsPrivacyPersonalized.checked,
          name: settingsName.value.trim(),
          email: settingsEmail.value.trim()
        };
        setSettings(s);
        applySettings();
        settingsMsg.textContent = 'Settings saved!';
        setTimeout(()=>settingsMsg.textContent='', 1200);
      }
      function resetSettings() {
        localStorage.removeItem(SETTINGS_KEY);
        applySettings();
        settingsMsg.textContent = 'Settings reset.';
        setTimeout(()=>settingsMsg.textContent='', 1200);
      }
      function exportSettings() {
        const data = JSON.stringify(getSettings(), null, 2);
        const blob = new Blob([data], {type:'application/json'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'letmeglowup-settings.json';
        document.body.appendChild(a);
        a.click();
        setTimeout(()=>{
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        }, 100);
      }
      function importSettings(e) {
        const file = e.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(ev) {
          try {
            const data = JSON.parse(ev.target.result);
            setSettings(data);
            applySettings();
            settingsMsg.textContent = 'Settings imported!';
            setTimeout(()=>settingsMsg.textContent='', 1200);
          } catch {
            settingsMsg.textContent = 'Invalid file.';
            setTimeout(()=>settingsMsg.textContent='', 1200);
          }
        };
        reader.readAsText(file);
      }
      // Modal open/close
      if (settingsBtn) settingsBtn.onclick = ()=>{ settingsModal.classList.remove('hidden'); applySettings(); };
      if (settingsClose) settingsClose.onclick = ()=>settingsModal.classList.add('hidden');
      // Save
      if (settingsForm) settingsForm.onsubmit = saveSettings;
      if (settingsReset) settingsReset.onclick = resetSettings;
      if (settingsExport) settingsExport.onclick = exportSettings;
      if (settingsImport) settingsImport.onchange = importSettings;
      // Theme live change
      if (settingsTheme) settingsTheme.onchange = ()=>applyTheme(settingsTheme.value);
      // Apply on load
      applySettings();
      // System theme change
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', ()=>{
        const s = getSettings();
        if ((s.theme||'system') === 'system') applyTheme('system');
      });
    })();
    </script>
    <script>
    // --- Wishlist & Recently Viewed Logic ---
    (function(){
      const WISHLIST_KEY = 'letmeglowup_wishlist';
      const RECENT_KEY = 'letmeglowup_recently_viewed';
      const wishlistCounter = document.getElementById('wishlist-counter');
      const wishlistHeaderIcon = document.getElementById('wishlist-header-icon');
      const wishlistHeaderLink = document.getElementById('wishlist-header-link');
      const wishlistModal = document.getElementById('wishlist-modal');
      const wishlistClose = document.getElementById('wishlist-close');
      const wishlistItemsBox = document.getElementById('wishlist-items');
      const wishlistShare = document.getElementById('wishlist-share');
      const wishlistClear = document.getElementById('wishlist-clear');
      const wishlistEmpty = document.getElementById('wishlist-empty');
      const recentlyViewedModal = document.getElementById('recently-viewed-modal');
      const recentlyViewedClose = document.getElementById('recently-viewed-close');
      const recentlyViewedItemsBox = document.getElementById('recently-viewed-items');
      const recentlyViewedHeaderLink = document.getElementById('recently-viewed-header-link');

      // --- Wishlist Core ---
      function getWishlist() {
        return JSON.parse(localStorage.getItem(WISHLIST_KEY)||'[]');
      }
      function setWishlist(arr) {
        localStorage.setItem(WISHLIST_KEY, JSON.stringify(arr));
        updateWishlistCounter();
      }
      function updateWishlistCounter() {
        const arr = getWishlist();
        if (wishlistCounter) wishlistCounter.textContent = arr.length;
        if (wishlistHeaderIcon) wishlistHeaderIcon.classList.toggle('active', arr.length > 0);
      }
      // --- Heart Icon Toggle ---
      function toggleWishlist(item) {
        let arr = getWishlist();
        const idx = arr.findIndex(x => x.id === item.id);
        if (idx >= 0) {
          arr.splice(idx,1);
        } else {
          arr.unshift(item);
        }
        setWishlist(arr);
        updateAllHearts();
      }
      function isWishlisted(id) {
        return getWishlist().some(x => x.id === id);
      }
      function updateAllHearts() {
        document.querySelectorAll('.wishlist-heart[data-id]').forEach(el => {
          const id = el.getAttribute('data-id');
          el.classList.toggle('active', isWishlisted(id));
        });
      }
      // --- Wishlist Modal/Page ---
      function showWishlist() {
        const arr = getWishlist();
        wishlistItemsBox.innerHTML = arr.map(item => `
          <div class='flex items-center gap-4 mb-4 border-b pb-3'>
            <img src='${item.img||''}' alt='' class='w-16 h-16 object-cover rounded-xl border border-soft-beige' />
            <div class='flex-1'>
              <div class='font-bold text-glossy-brown text-lg mb-1'>${item.title||''}</div>
              <div class='text-gray-700 mb-1'>${item.desc||''}</div>
              <div class='text-xs text-gray-500 mb-1'>${item.type ? item.type.charAt(0).toUpperCase()+item.type.slice(1) : ''}${item.category ? ' • ' + item.category : ''}</div>
              <button class='btn bg-pop-pink text-white text-xs move-to-cart' data-id='${item.id}'>Move to Cart</button>
              <button class='btn bg-soft-beige text-pop-pink text-xs remove-wishlist' data-id='${item.id}'>Remove</button>
            </div>
          </div>
        `).join('');
        wishlistEmpty.classList.toggle('hidden', arr.length > 0);
        wishlistItemsBox.classList.toggle('hidden', arr.length === 0);
      }
      // --- Wishlist Modal Events ---
      if (wishlistHeaderLink) wishlistHeaderLink.addEventListener('click', e => {
        e.preventDefault();
        showWishlist();
        wishlistModal.classList.remove('hidden');
      });
      if (wishlistClose) wishlistClose.onclick = () => wishlistModal.classList.add('hidden');
      if (wishlistClear) wishlistClear.onclick = () => { setWishlist([]); showWishlist(); };
      if (wishlistShare) wishlistShare.onclick = () => {
        const arr = getWishlist();
        const url = `${window.location.origin}/wishlist.html?ids=${arr.map(i=>encodeURIComponent(i.id)).join(',')}`;
        navigator.clipboard.writeText(url).then(()=>{
          wishlistShare.textContent = 'Link Copied!';
          setTimeout(()=>wishlistShare.textContent='Share Wishlist',1200);
        });
      };
      if (wishlistItemsBox) wishlistItemsBox.onclick = function(e) {
        if (e.target.classList.contains('remove-wishlist')) {
          const id = e.target.getAttribute('data-id');
          let arr = getWishlist().filter(x=>x.id!==id);
          setWishlist(arr); showWishlist();
        }
        if (e.target.classList.contains('move-to-cart')) {
          // Simulate move to cart
          e.target.textContent = 'Moved!';
          e.target.disabled = true;
        }
      };
      // --- Heart Icon Event Delegation ---
      document.body.addEventListener('click', function(e) {
        const heart = e.target.closest('.wishlist-heart[data-id]');
        if (heart) {
          const id = heart.getAttribute('data-id');
          const item = JSON.parse(heart.getAttribute('data-item'));
          toggleWishlist(item);
        }
      });
      // --- Recently Viewed ---
      function getRecentlyViewed() {
        return JSON.parse(localStorage.getItem(RECENT_KEY)||'[]');
      }
      function setRecentlyViewed(arr) {
        localStorage.setItem(RECENT_KEY, JSON.stringify(arr));
      }
      function addRecentlyViewed(item) {
        let arr = getRecentlyViewed();
        arr = arr.filter(x=>x.id!==item.id);
        arr.unshift(item);
        if (arr.length>10) arr = arr.slice(0,10);
        setRecentlyViewed(arr);
      }
      // Show recently viewed modal
      function showRecentlyViewed() {
        const arr = getRecentlyViewed();
        recentlyViewedItemsBox.innerHTML = arr.length ? arr.map(item=>`
          <div class='flex items-center gap-4 mb-4 border-b pb-3'>
            <img src='${item.img||''}' alt='' class='w-16 h-16 object-cover rounded-xl border border-soft-beige' />
            <div class='flex-1'>
              <div class='font-bold text-glossy-brown text-lg mb-1'>${item.title||''}</div>
              <div class='text-gray-700 mb-1'>${item.desc||''}</div>
              <div class='text-xs text-gray-500 mb-1'>${item.type ? item.type.charAt(0).toUpperCase()+item.type.slice(1) : ''}${item.category ? ' • ' + item.category : ''}</div>
            </div>
          </div>
        `).join('') : '<div class="text-pop-pink text-center">No recently viewed items.</div>';
        recentlyViewedModal.classList.remove('hidden');
      }
      if (recentlyViewedHeaderLink) recentlyViewedHeaderLink.addEventListener('click', e => {
        e.preventDefault();
        showRecentlyViewed();
      });
      if (recentlyViewedClose) recentlyViewedClose.onclick = () => recentlyViewedModal.classList.add('hidden');
      // --- On page load, update all hearts and counter ---
      updateWishlistCounter();
      updateAllHearts();
      // --- Attach to product cards (example, must be adapted to your product rendering) ---
      window.attachWishlistToProducts = function() {
        document.querySelectorAll('.product-card').forEach(card => {
          const id = card.getAttribute('data-id') || card.querySelector('h3')?.textContent?.replace(/\s+/g,'-').toLowerCase();
          const title = card.querySelector('h3')?.textContent || '';
          const desc = card.querySelector('p')?.textContent || '';
          const img = card.querySelector('img')?.src || '';
          const type = card.getAttribute('data-category') || 'product';
          const item = {id,title,desc,img,type};
          let heart = card.querySelector('.wishlist-heart');
          if (!heart) {
            heart = document.createElement('span');
            heart.className = 'wishlist-heart';
            heart.setAttribute('data-id', id);
            heart.setAttribute('data-item', JSON.stringify(item));
            heart.innerHTML = `<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 21s-6.5-5.2-9-8.5C-1.5 7.5 2.5 3 7 5.5c2.1 1.2 3 2.5 5 5.5 2-3 2.9-4.3 5-5.5C21.5 3 25.5 7.5 21 12.5c-2.5 3.3-9 8.5-9 8.5z"/></svg>`;
            card.querySelector('.p-4')?.prepend(heart);
          }
          heart.classList.toggle('active', isWishlisted(id));
          // Add recently viewed on click
          card.addEventListener('click', function(){
            addRecentlyViewed(item);
          }, { once: true });
        });
      };
      // Attach on DOMContentLoaded and after product rendering
      document.addEventListener('DOMContentLoaded', window.attachWishlistToProducts);
    })();
    </script>
    <script>
      // Language Switcher Implementation
      const LANGS = ['en', 'ar', 'fr'];
      const DEFAULT_LANG = 'en';
      const langFiles = {
        en: 'assets/lang/en.json',
        ar: 'assets/lang/ar.json',
        fr: 'assets/lang/fr.json'
      };
      let currentLang = localStorage.getItem('lang') || DEFAULT_LANG;
      const langSwitcher = document.getElementById('lang-switcher');
      if (langSwitcher) langSwitcher.value = currentLang;

      function setDir(lang) {
        if (lang === 'ar') {
          document.documentElement.dir = 'rtl';
          document.body.classList.add('rtl');
        } else {
          document.documentElement.dir = 'ltr';
          document.body.classList.remove('rtl');
        }
      }

      function formatContent(val, type, lang) {
        if (type === 'date') {
          try {
            return new Date(val).toLocaleDateString(lang, { year: 'numeric', month: 'long', day: 'numeric' });
          } catch { return val; }
        }
        if (type === 'number') {
          try {
            return Number(val).toLocaleString(lang);
          } catch { return val; }
        }
        return val;
      }

      async function loadLang(lang) {
        let dict = {};
        try {
          const res = await fetch(langFiles[lang]);
          dict = await res.json();
        } catch { /* fallback to empty */ }
        // Replace content
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          let val = key.split('.').reduce((o, k) => (o||{})[k], dict);
          if (!val) {
            // fallback to English if not found
            if (lang !== 'en') {
              try {
                fetch(langFiles['en']).then(r=>r.json()).then(enDict => {
                  let fallback = key.split('.').reduce((o, k) => (o||{})[k], enDict);
                  if (fallback) el.innerHTML = fallback;
                });
              } catch {}
            }
            return;
          }
          // Formatting
          const type = el.getAttribute('data-i18n-type');
          el.innerHTML = type ? formatContent(val, type, lang) : val;
        });
        setDir(lang);
      }

      if (langSwitcher) {
        langSwitcher.onchange = function() {
          currentLang = this.value;
          localStorage.setItem('lang', currentLang);
          loadLang(currentLang);
        };
      }

      // On load
      loadLang(currentLang);
    </script>
  </body>
</html>
